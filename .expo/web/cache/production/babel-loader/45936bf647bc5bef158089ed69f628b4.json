{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"colors\",\"locations\",\"startPoint\",\"endPoint\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import*as React from'react';import View from\"react-native-web/dist/exports/View\";import normalizeColor from'react-native-web/src/modules/normalizeColor';export default function NativeLinearGradient(_ref){var colors=_ref.colors,locations=_ref.locations,startPoint=_ref.startPoint,endPoint=_ref.endPoint,props=_objectWithoutProperties(_ref,_excluded);var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),layout=_React$useState2[0],setLayout=_React$useState2[1];var _ref2=layout!=null?layout:{},_ref2$width=_ref2.width,width=_ref2$width===void 0?1:_ref2$width,_ref2$height=_ref2.height,height=_ref2$height===void 0?1:_ref2$height;var pseudoAngle=React.useMemo(function(){var getControlPoints=function getControlPoints(){var correctedStartPoint=[0,0];if(Array.isArray(startPoint)){correctedStartPoint=[startPoint[0]!=null?startPoint[0]:0.0,startPoint[1]!=null?startPoint[1]:0.0];}var correctedEndPoint=[0.0,1.0];if(Array.isArray(endPoint)){correctedEndPoint=[endPoint[0]!=null?endPoint[0]:0.0,endPoint[1]!=null?endPoint[1]:1.0];}return[correctedStartPoint,correctedEndPoint];};var _getControlPoints=getControlPoints(),_getControlPoints2=_slicedToArray(_getControlPoints,2),start=_getControlPoints2[0],end=_getControlPoints2[1];start[0]*=width;end[0]*=width;start[1]*=height;end[1]*=height;var py=end[1]-start[1];var px=end[0]-start[0];return 90+Math.atan2(py,px)*180/Math.PI;},[width,height,startPoint,endPoint]);var gradientColors=React.useMemo(function(){return colors.map(function(color,index){var hexColor=normalizeColor(color);var output=hexColor;if(locations&&locations[index]){var location=Math.max(0,Math.min(1,locations[index]));var percentage=location*100;output+=\" \"+percentage+\"%\";}return output;});},[colors,locations]);var colorStyle=gradientColors.join(',');var backgroundImage=\"linear-gradient(\"+pseudoAngle+\"deg, \"+colorStyle+\")\";return React.createElement(View,_objectSpread(_objectSpread({},props),{},{style:[props.style,{backgroundImage:backgroundImage}],onLayout:function onLayout(event){var _event$nativeEvent$la=event.nativeEvent.layout,x=_event$nativeEvent$la.x,y=_event$nativeEvent$la.y,width=_event$nativeEvent$la.width,height=_event$nativeEvent$la.height;var oldLayout=layout!=null?layout:{x:0,y:0,width:1,height:1};if(x!==oldLayout.x||y!==oldLayout.y||width!==oldLayout.width||height!==oldLayout.height){setLayout({x:x,y:y,width:width,height:height});}if(props.onLayout){props.onLayout(event);}}}));}","map":{"version":3,"mappings":"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","names":["React","normalizeColor","NativeLinearGradient","colors","locations","startPoint","endPoint","props","useState","layout","setLayout","width","height","pseudoAngle","useMemo","getControlPoints","correctedStartPoint","Array","isArray","correctedEndPoint","start","end","py","px","Math","atan2","PI","gradientColors","map","color","index","hexColor","output","location","max","min","percentage","colorStyle","join","backgroundImage","View","style","onLayout","event","nativeEvent","x","y","oldLayout"],"sourceRoot":"","sources":["../src/NativeLinearGradient.web.tsx"],"sourcesContent":["import * as React from 'react';\nimport { LayoutRectangle, View } from 'react-native';\nimport normalizeColor from 'react-native-web/src/modules/normalizeColor';\n\nimport { NativeLinearGradientPoint, NativeLinearGradientProps } from './NativeLinearGradient.types';\n\nexport default function NativeLinearGradient({\n  colors,\n  locations,\n  startPoint,\n  endPoint,\n  ...props\n}: NativeLinearGradientProps): React.ReactElement {\n  const [layout, setLayout] = React.useState<LayoutRectangle | null>(null);\n\n  const { width = 1, height = 1 } = layout ?? {};\n\n  const pseudoAngle = React.useMemo(() => {\n    const getControlPoints = (): NativeLinearGradientPoint[] => {\n      let correctedStartPoint: NativeLinearGradientPoint = [0, 0];\n      if (Array.isArray(startPoint)) {\n        correctedStartPoint = [\n          startPoint[0] != null ? startPoint[0] : 0.0,\n          startPoint[1] != null ? startPoint[1] : 0.0,\n        ];\n      }\n      let correctedEndPoint: NativeLinearGradientPoint = [0.0, 1.0];\n      if (Array.isArray(endPoint)) {\n        correctedEndPoint = [\n          endPoint[0] != null ? endPoint[0] : 0.0,\n          endPoint[1] != null ? endPoint[1] : 1.0,\n        ];\n      }\n      return [correctedStartPoint, correctedEndPoint];\n    };\n\n    const [start, end] = getControlPoints();\n    start[0] *= width;\n    end[0] *= width;\n    start[1] *= height;\n    end[1] *= height;\n    const py = end[1] - start[1];\n    const px = end[0] - start[0];\n\n    return 90 + (Math.atan2(py, px) * 180) / Math.PI;\n  }, [width, height, startPoint, endPoint]);\n\n  const gradientColors = React.useMemo(() => {\n    return colors.map((color: number, index: number): string => {\n      const hexColor = normalizeColor(color);\n      let output = hexColor;\n      if (locations && locations[index]) {\n        const location = Math.max(0, Math.min(1, locations[index]));\n        // Convert 0...1 to 0...100\n        const percentage = location * 100;\n        output += ` ${percentage}%`;\n      }\n      return output;\n    });\n  }, [colors, locations]);\n\n  const colorStyle = gradientColors.join(',');\n  const backgroundImage = `linear-gradient(${pseudoAngle}deg, ${colorStyle})`;\n  // TODO(Bacon): In the future we could consider adding `backgroundRepeat: \"no-repeat\"`. For more\n  // browser support.\n  return (\n    <View\n      {...props}\n      style={[\n        props.style,\n        // @ts-ignore: [ts] Property 'backgroundImage' does not exist on type 'ViewStyle'.\n        { backgroundImage },\n      ]}\n      onLayout={(event) => {\n        const { x, y, width, height } = event.nativeEvent.layout;\n        const oldLayout = layout ?? { x: 0, y: 0, width: 1, height: 1 };\n        // don't set new layout state unless the layout has actually changed\n        if (\n          x !== oldLayout.x ||\n          y !== oldLayout.y ||\n          width !== oldLayout.width ||\n          height !== oldLayout.height\n        ) {\n          setLayout({ x, y, width, height });\n        }\n\n        if (props.onLayout) {\n          props.onLayout(event);\n        }\n      }}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}