{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import dayjs from'dayjs';import React,{useCallback,useContext,useEffect,useMemo,useState}from'react';import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Image from\"react-native-web/dist/exports/Image\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import InteractionManager from\"react-native-web/dist/exports/InteractionManager\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import{PropsContext}from\"./Chatty\";import{ReplyingTo}from\"./components/ReplyingTo\";import{UrlPreviewBubble}from\"./components/UrlPreviewBubble\";import{MediaType,MessageStatus}from\"./types/Chatty.types\";import{ChatEmitter}from\"./utils/eventEmitter\";import{extractUrlFromString,fetchMetaData}from\"./utils/helpers\";import{Skeleton}from\"./utils/moti\";import{ALL_PATERNS_SHAPES,HASHTAG_PATTERN_SHAPE,LoadAllPaternShapes,loadParsedText,MENTION_PATTERN_SHAPE,URL_PATTERN_SHAPE}from\"./utils/patterns\";import{PhotoView}from\"./utils/photoView\";import{ContextMenuWrapper}from\"./wrappers/ContextMenuWrapper\";var ParsedText=loadParsedText();function _ChatBubble(props){var _propsContext$bubbleP7,_propsContext$bubbleP8,_propsContext$bubbleP18,_propsContext$bubbleP19,_propsContext$bubbleP20,_propsContext$pattern3,_propsContext$pattern4,_propsContext$bubbleP33,_propsContext$bubbleP34,_propsContext$bubbleP35,_propsContext$bubbleP36,_propsContext$bubbleP37,_propsContext$bubbleP38,_propsContext$bubbleP39,_propsContext$bubbleP40,_propsContext$bubbleP43,_propsContext$bubbleP45,_propsContext$listPro7,_propsContext$listPro8,_propsContext$bubbleP46,_propsContext$bubbleP47,_propsContext$bubbleP48,_message$user$avatar,_propsContext$bubbleP49,_message$repliedTo,_propsContext$bubbleP50,_propsContext$bubbleP51,_message$me2,_propsContext$bubbleP52,_propsContext$bubbleP53,_message$me3,_propsContext$bubbleP54,_propsContext$bubbleP55,_message$user$avatar2,_propsContext$bubbleP56;var message=props.message,children=props.children;var propsContext=useContext(PropsContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),mediaLoaded=_useState2[0],setMediaLoaded=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showMedia=_useState4[0],setShowMedia=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showUrlPreview=_useState6[0],setShowUrlPreview=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),urlPreviewData=_useState8[0],setUrlPreviewData=_useState8[1];var createdAt=useMemo(function(){return message&&dayjs(message.createdAt).format('HH:mm');},[message]);var avatarSize=useMemo(function(){var _propsContext$bubbleP,_propsContext$bubbleP2,_propsContext$bubbleP3,_propsContext$bubbleP4,_propsContext$bubbleP5,_propsContext$bubbleP6;return{width:((_propsContext$bubbleP=propsContext.bubbleProps)===null||_propsContext$bubbleP===void 0?void 0:(_propsContext$bubbleP2=_propsContext$bubbleP.showAvatars)===null||_propsContext$bubbleP2===void 0?void 0:_propsContext$bubbleP2.width)||40,height:((_propsContext$bubbleP3=propsContext.bubbleProps)===null||_propsContext$bubbleP3===void 0?void 0:(_propsContext$bubbleP4=_propsContext$bubbleP3.showAvatars)===null||_propsContext$bubbleP4===void 0?void 0:_propsContext$bubbleP4.width)||40,borderRadius:((_propsContext$bubbleP5=propsContext.bubbleProps)===null||_propsContext$bubbleP5===void 0?void 0:(_propsContext$bubbleP6=_propsContext$bubbleP5.showAvatars)===null||_propsContext$bubbleP6===void 0?void 0:_propsContext$bubbleP6.width)||40};},[(_propsContext$bubbleP7=propsContext.bubbleProps)===null||_propsContext$bubbleP7===void 0?void 0:(_propsContext$bubbleP8=_propsContext$bubbleP7.showAvatars)===null||_propsContext$bubbleP8===void 0?void 0:_propsContext$bubbleP8.width]);var bubbleBackgroundColor=useMemo(function(){var _propsContext$bubbleP9,_propsContext$bubbleP16,_propsContext$bubbleP17;if((_propsContext$bubbleP9=propsContext.bubbleProps)!==null&&_propsContext$bubbleP9!==void 0&&_propsContext$bubbleP9.containerStyle){if(message!==null&&message!==void 0&&message.me){var _propsContext$bubbleP10,_propsContext$bubbleP11;return _objectSpread({backgroundColor:(_propsContext$bubbleP10=propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP11=propsContext.bubbleProps)===null||_propsContext$bubbleP11===void 0?void 0:_propsContext$bubbleP11.selfBubbleColor)!==null&&_propsContext$bubbleP10!==void 0?_propsContext$bubbleP10:'#afddfa'},propsContext.bubbleProps.containerStyle);}else{var _propsContext$bubbleP12,_propsContext$bubbleP13;return _objectSpread({backgroundColor:(_propsContext$bubbleP12=propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP13=propsContext.bubbleProps)===null||_propsContext$bubbleP13===void 0?void 0:_propsContext$bubbleP13.otherBubbleColor)!==null&&_propsContext$bubbleP12!==void 0?_propsContext$bubbleP12:'#c8faaf'},propsContext.bubbleProps.containerStyle);}}if(message!==null&&message!==void 0&&message.me){var _propsContext$bubbleP14,_propsContext$bubbleP15;return{backgroundColor:(_propsContext$bubbleP14=propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP15=propsContext.bubbleProps)===null||_propsContext$bubbleP15===void 0?void 0:_propsContext$bubbleP15.selfBubbleColor)!==null&&_propsContext$bubbleP14!==void 0?_propsContext$bubbleP14:'#afddfa'};}return{backgroundColor:(_propsContext$bubbleP16=propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP17=propsContext.bubbleProps)===null||_propsContext$bubbleP17===void 0?void 0:_propsContext$bubbleP17.otherBubbleColor)!==null&&_propsContext$bubbleP16!==void 0?_propsContext$bubbleP16:'#c8faaf'};},[message===null||message===void 0?void 0:message.me,propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP18=propsContext.bubbleProps)===null||_propsContext$bubbleP18===void 0?void 0:_propsContext$bubbleP18.otherBubbleColor,propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP19=propsContext.bubbleProps)===null||_propsContext$bubbleP19===void 0?void 0:_propsContext$bubbleP19.selfBubbleColor,(_propsContext$bubbleP20=propsContext.bubbleProps)===null||_propsContext$bubbleP20===void 0?void 0:_propsContext$bubbleP20.containerStyle]);var bubbleAlignment=useMemo(function(){if(message!==null&&message!==void 0&&message.me){return{alignSelf:'flex-end'};}return{alignSelf:'flex-start'};},[message===null||message===void 0?void 0:message.me]);useEffect(function(){if(message!==null&&message!==void 0&&message.media){message.media.forEach(function(media){if(media.type===MediaType.Image){InteractionManager.runAfterInteractions(function(){Image.prefetch(media.uri).then(function(){setMediaLoaded(true);});});}});}if(propsContext.enableUrlPreviews){InteractionManager.runAfterInteractions(function _callee(){var _message$text,url,data;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=extractUrlFromString((_message$text=message===null||message===void 0?void 0:message.text)!==null&&_message$text!==void 0?_message$text:'');if(!url){_context.next=6;break;}_context.next=4;return _regeneratorRuntime.awrap(fetchMetaData(url));case 4:data=_context.sent;if(data){setShowUrlPreview(true);setUrlPreviewData(data);}case 6:case\"end\":return _context.stop();}}},null,null,null,Promise);});}},[message===null||message===void 0?void 0:message.media,message===null||message===void 0?void 0:message.text,propsContext.enableUrlPreviews]);var onPressPattern=useCallback(function(pattern,index){if(!message)return;ChatEmitter===null||ChatEmitter===void 0?void 0:ChatEmitter.emit('patternPressed',pattern,index,message);},[message]);var messagePatterns=useMemo(function(){var _propsContext$pattern,_propsContext$pattern2;var patterns=[];if(!(propsContext!==null&&propsContext!==void 0&&propsContext.enablePatterns))return;if(!ParsedText)return;LoadAllPaternShapes(onPressPattern);if((_propsContext$pattern=propsContext.patternProps)!==null&&_propsContext$pattern!==void 0&&_propsContext$pattern.customPatterns){patterns.push.apply(patterns,_toConsumableArray(propsContext.patternProps.customPatterns));}if(propsContext!==null&&propsContext!==void 0&&(_propsContext$pattern2=propsContext.patternProps)!==null&&_propsContext$pattern2!==void 0&&_propsContext$pattern2.allowPatterns){propsContext.patternProps.allowPatterns.forEach(function(pattern){switch(pattern){case'hashtag':patterns.push(HASHTAG_PATTERN_SHAPE);break;case'mention':patterns.push(MENTION_PATTERN_SHAPE);break;case'url':patterns.push(URL_PATTERN_SHAPE);break;}});}else{ALL_PATERNS_SHAPES.forEach(function(pattern){return patterns.push(pattern);});}return patterns;},[onPressPattern,propsContext===null||propsContext===void 0?void 0:propsContext.enablePatterns,propsContext===null||propsContext===void 0?void 0:(_propsContext$pattern3=propsContext.patternProps)===null||_propsContext$pattern3===void 0?void 0:_propsContext$pattern3.allowPatterns,propsContext===null||propsContext===void 0?void 0:(_propsContext$pattern4=propsContext.patternProps)===null||_propsContext$pattern4===void 0?void 0:_propsContext$pattern4.customPatterns]);var renderTicks=useCallback(function(){var _propsContext$bubbleP21,_propsContext$bubbleP22,_propsContext$bubbleP23,_propsContext$bubbleP24,_propsContext$bubbleP25,_propsContext$bubbleP26,_propsContext$bubbleP27,_propsContext$bubbleP28,_propsContext$bubbleP29,_propsContext$bubbleP30,_propsContext$bubbleP31,_propsContext$bubbleP32;if(message!==null&&message!==void 0&&message.status){switch(message.status){case MessageStatus.Sending:return(_propsContext$bubbleP21=(_propsContext$bubbleP22=propsContext.bubbleProps)===null||_propsContext$bubbleP22===void 0?void 0:(_propsContext$bubbleP23=_propsContext$bubbleP22.tickProps)===null||_propsContext$bubbleP23===void 0?void 0:_propsContext$bubbleP23.sendingElement)!==null&&_propsContext$bubbleP21!==void 0?_propsContext$bubbleP21:React.createElement(Text,null,\"\\uD83D\\uDD04\");case MessageStatus.Sent:return(_propsContext$bubbleP24=(_propsContext$bubbleP25=propsContext.bubbleProps)===null||_propsContext$bubbleP25===void 0?void 0:(_propsContext$bubbleP26=_propsContext$bubbleP25.tickProps)===null||_propsContext$bubbleP26===void 0?void 0:_propsContext$bubbleP26.sentElement)!==null&&_propsContext$bubbleP24!==void 0?_propsContext$bubbleP24:React.createElement(Text,null,\"\\u2714\");case MessageStatus.Delivered:return(_propsContext$bubbleP27=(_propsContext$bubbleP28=propsContext.bubbleProps)===null||_propsContext$bubbleP28===void 0?void 0:(_propsContext$bubbleP29=_propsContext$bubbleP28.tickProps)===null||_propsContext$bubbleP29===void 0?void 0:_propsContext$bubbleP29.deliveredElement)!==null&&_propsContext$bubbleP27!==void 0?_propsContext$bubbleP27:React.createElement(Text,null,\"\\u2611\");case MessageStatus.Read:return(_propsContext$bubbleP30=(_propsContext$bubbleP31=propsContext.bubbleProps)===null||_propsContext$bubbleP31===void 0?void 0:(_propsContext$bubbleP32=_propsContext$bubbleP31.tickProps)===null||_propsContext$bubbleP32===void 0?void 0:_propsContext$bubbleP32.readElement)!==null&&_propsContext$bubbleP30!==void 0?_propsContext$bubbleP30:React.createElement(Text,null,\"\\u2705\");}}return null;},[message===null||message===void 0?void 0:message.status,(_propsContext$bubbleP33=propsContext.bubbleProps)===null||_propsContext$bubbleP33===void 0?void 0:(_propsContext$bubbleP34=_propsContext$bubbleP33.tickProps)===null||_propsContext$bubbleP34===void 0?void 0:_propsContext$bubbleP34.deliveredElement,(_propsContext$bubbleP35=propsContext.bubbleProps)===null||_propsContext$bubbleP35===void 0?void 0:(_propsContext$bubbleP36=_propsContext$bubbleP35.tickProps)===null||_propsContext$bubbleP36===void 0?void 0:_propsContext$bubbleP36.readElement,(_propsContext$bubbleP37=propsContext.bubbleProps)===null||_propsContext$bubbleP37===void 0?void 0:(_propsContext$bubbleP38=_propsContext$bubbleP37.tickProps)===null||_propsContext$bubbleP38===void 0?void 0:_propsContext$bubbleP38.sendingElement,(_propsContext$bubbleP39=propsContext.bubbleProps)===null||_propsContext$bubbleP39===void 0?void 0:(_propsContext$bubbleP40=_propsContext$bubbleP39.tickProps)===null||_propsContext$bubbleP40===void 0?void 0:_propsContext$bubbleP40.sentElement]);var renderFooter=useCallback(function(){var _propsContext$bubbleP41,_propsContext$bubbleP42,_message$me;return React.createElement(View,{style:styles.bubbleFooter},React.createElement(Text,{style:[styles.date,(propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP41=propsContext.bubbleProps)===null||_propsContext$bubbleP41===void 0?void 0:_propsContext$bubbleP41.dateStyle)&&(propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP42=propsContext.bubbleProps)===null||_propsContext$bubbleP42===void 0?void 0:_propsContext$bubbleP42.dateStyle((_message$me=message===null||message===void 0?void 0:message.me)!==null&&_message$me!==void 0?_message$me:false))]},createdAt),renderTicks());},[createdAt,message===null||message===void 0?void 0:message.me,propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP43=propsContext.bubbleProps)===null||_propsContext$bubbleP43===void 0?void 0:_propsContext$bubbleP43.dateStyle,renderTicks]);var renderCornerRounding=useCallback(function(){var _propsContext$bubbleP44;if(((_propsContext$bubbleP44=propsContext.bubbleProps)===null||_propsContext$bubbleP44===void 0?void 0:_propsContext$bubbleP44.enableCornerRounding)===false)return null;if(message!==null&&message!==void 0&&message.me){var _propsContext$listPro,_propsContext$listPro2,_propsContext$listPro3;return React.createElement(React.Fragment,null,React.createElement(View,{style:[styles.rightArrow,bubbleBackgroundColor]}),React.createElement(View,{style:[styles.rightArrowOverlap,{backgroundColor:(_propsContext$listPro=(_propsContext$listPro2=propsContext.listProps)===null||_propsContext$listPro2===void 0?void 0:(_propsContext$listPro3=_propsContext$listPro2.containerStyle)===null||_propsContext$listPro3===void 0?void 0:_propsContext$listPro3.backgroundColor)!==null&&_propsContext$listPro!==void 0?_propsContext$listPro:'#fff'}]}));}else{var _propsContext$listPro4,_propsContext$listPro5,_propsContext$listPro6;return React.createElement(React.Fragment,null,React.createElement(View,{style:[styles.leftArrow,bubbleBackgroundColor]}),React.createElement(View,{style:[styles.leftArrowOverlap,{backgroundColor:(_propsContext$listPro4=(_propsContext$listPro5=propsContext.listProps)===null||_propsContext$listPro5===void 0?void 0:(_propsContext$listPro6=_propsContext$listPro5.containerStyle)===null||_propsContext$listPro6===void 0?void 0:_propsContext$listPro6.backgroundColor)!==null&&_propsContext$listPro4!==void 0?_propsContext$listPro4:'#fff'}]}));}},[bubbleBackgroundColor,message===null||message===void 0?void 0:message.me,(_propsContext$bubbleP45=propsContext.bubbleProps)===null||_propsContext$bubbleP45===void 0?void 0:_propsContext$bubbleP45.enableCornerRounding,(_propsContext$listPro7=propsContext.listProps)===null||_propsContext$listPro7===void 0?void 0:(_propsContext$listPro8=_propsContext$listPro7.containerStyle)===null||_propsContext$listPro8===void 0?void 0:_propsContext$listPro8.backgroundColor]);var renderMedia=useCallback(function(){if(message!==null&&message!==void 0&&message.media){var _message$media$;return React.createElement(View,{style:{flexDirection:'row',flexWrap:'wrap'}},message===null||message===void 0?void 0:message.media.map(function(media,index){if(index<3){return React.createElement(TouchableOpacity,{onPress:function onPress(){return setShowMedia(true);}},media.type===MediaType.Image&&React.createElement(Skeleton,{show:!mediaLoaded},React.createElement(Image,{source:{uri:media.uri},style:styles.media})));}return null;}),message.media.length>3&&React.createElement(TouchableOpacity,{onPress:function onPress(){return setShowMedia(true);}},React.createElement(ImageBackground,{style:styles.media,source:{uri:(_message$media$=message.media[3])===null||_message$media$===void 0?void 0:_message$media$.uri},imageStyle:{borderRadius:15}},React.createElement(View,{style:styles.backgroundOverlay},React.createElement(Text,{style:{color:'#fff',textAlign:'center',fontSize:20}},\"+ \",message.media.length-3)))),PhotoView&&React.createElement(PhotoView,{images:message===null||message===void 0?void 0:message.media,imageIndex:0,visible:showMedia,onRequestClose:function onRequestClose(){return setShowMedia(false);}}));}return null;},[mediaLoaded,message,showMedia]);var renderUrlPreview=useMemo(function(){if(showUrlPreview&&urlPreviewData&&!(message!==null&&message!==void 0&&message.repliedTo)){return React.createElement(View,{style:{marginTop:10}},React.createElement(UrlPreviewBubble,{title:urlPreviewData.title,description:urlPreviewData.description,image:urlPreviewData.image,url:urlPreviewData.url}));}return null;},[message===null||message===void 0?void 0:message.repliedTo,showUrlPreview,urlPreviewData]);return React.createElement(View,{style:[styles.wrapper,bubbleAlignment]},((_propsContext$bubbleP46=propsContext.bubbleProps)===null||_propsContext$bubbleP46===void 0?void 0:_propsContext$bubbleP46.trailingAccessory)&&(message===null||message===void 0?void 0:message.me)&&React.createElement(View,null,propsContext.bubbleProps.trailingAccessory),((_propsContext$bubbleP47=propsContext.bubbleProps)===null||_propsContext$bubbleP47===void 0?void 0:(_propsContext$bubbleP48=_propsContext$bubbleP47.showAvatars)===null||_propsContext$bubbleP48===void 0?void 0:_propsContext$bubbleP48.visible)&&!(message!==null&&message!==void 0&&message.me)&&React.createElement(Image,{source:(_message$user$avatar=message===null||message===void 0?void 0:message.user.avatar)!==null&&_message$user$avatar!==void 0?_message$user$avatar:require(\"./assets/images/noavatar.png\"),style:[styles.avatar,avatarSize]}),React.createElement(ContextMenuWrapper,{message:message},React.createElement(View,{style:[bubbleBackgroundColor,styles.container,(_propsContext$bubbleP49=propsContext.bubbleProps)===null||_propsContext$bubbleP49===void 0?void 0:_propsContext$bubbleP49.containerStyle,{padding:message!==null&&message!==void 0&&message.repliedTo?5:15}]},children?children:React.createElement(React.Fragment,null,(message===null||message===void 0?void 0:message.repliedTo)&&React.createElement(ReplyingTo,{username:message===null||message===void 0?void 0:(_message$repliedTo=message.repliedTo)===null||_message$repliedTo===void 0?void 0:_message$repliedTo.user.username,text:message===null||message===void 0?void 0:message.repliedTo.text,messageId:message===null||message===void 0?void 0:message.repliedTo.id}),propsContext!==null&&propsContext!==void 0&&propsContext.enablePatterns&&ParsedText?React.createElement(React.Fragment,null,renderMedia(),React.createElement(ParsedText,{parse:messagePatterns,style:(propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP50=propsContext.bubbleProps)===null||_propsContext$bubbleP50===void 0?void 0:_propsContext$bubbleP50.labelStyle)&&((_propsContext$bubbleP51=propsContext.bubbleProps)===null||_propsContext$bubbleP51===void 0?void 0:_propsContext$bubbleP51.labelStyle((_message$me2=message===null||message===void 0?void 0:message.me)!==null&&_message$me2!==void 0?_message$me2:false))},message===null||message===void 0?void 0:message.text),renderUrlPreview,renderFooter()):React.createElement(View,null,renderMedia(),React.createElement(Text,{style:(propsContext===null||propsContext===void 0?void 0:(_propsContext$bubbleP52=propsContext.bubbleProps)===null||_propsContext$bubbleP52===void 0?void 0:_propsContext$bubbleP52.labelStyle)&&((_propsContext$bubbleP53=propsContext.bubbleProps)===null||_propsContext$bubbleP53===void 0?void 0:_propsContext$bubbleP53.labelStyle((_message$me3=message===null||message===void 0?void 0:message.me)!==null&&_message$me3!==void 0?_message$me3:false))},message===null||message===void 0?void 0:message.text),renderUrlPreview,renderFooter())),renderCornerRounding())),((_propsContext$bubbleP54=propsContext.bubbleProps)===null||_propsContext$bubbleP54===void 0?void 0:(_propsContext$bubbleP55=_propsContext$bubbleP54.showAvatars)===null||_propsContext$bubbleP55===void 0?void 0:_propsContext$bubbleP55.visible)&&(message===null||message===void 0?void 0:message.me)&&React.createElement(Image,{source:(_message$user$avatar2=message===null||message===void 0?void 0:message.user.avatar)!==null&&_message$user$avatar2!==void 0?_message$user$avatar2:require(\"./assets/images/noavatar.png\"),style:[styles.avatarMe,avatarSize]}),((_propsContext$bubbleP56=propsContext.bubbleProps)===null||_propsContext$bubbleP56===void 0?void 0:_propsContext$bubbleP56.trailingAccessory)&&!(message!==null&&message!==void 0&&message.me)&&React.createElement(View,null,propsContext.bubbleProps.trailingAccessory));}export var ChatBubble=React.memo(_ChatBubble);export var styles=StyleSheet.create({wrapper:{flexDirection:'row',alignItems:'center',justifyContent:'space-between'},container:{margin:20,maxWidth:Dimensions.get('screen').width-120,borderRadius:10},rightArrow:{position:'absolute',width:20,height:25,bottom:0,borderBottomLeftRadius:25,right:-7},rightArrowOverlap:{position:'absolute',width:20,height:35,bottom:-6,borderBottomLeftRadius:18,right:-20},leftArrow:{position:'absolute',width:20,height:25,bottom:0,borderBottomRightRadius:25,left:-10},leftArrowOverlap:{position:'absolute',width:20,height:35,bottom:-6,borderBottomRightRadius:18,left:-20},date:{color:'#a8a8a8',fontSize:11},avatar:{marginLeft:10},avatarMe:{marginRight:10},bubbleFooter:{justifyContent:'flex-end',flexDirection:'row',marginTop:5},moreMedia:{width:100,height:100,borderWidth:1,borderStyle:'dashed',borderRadius:15,justifyContent:'center',alignItems:'center',borderColor:'#ccc'},media:{width:110,height:100,borderRadius:15,marginRight:10,marginBottom:10},backgroundOverlay:{width:110,height:100,backgroundColor:'rgba(0,0,0,0.6)',borderRadius:15,justifyContent:'center',alignContent:'center',alignItems:'center'}});","map":{"version":3,"mappings":"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","names":["dayjs","React","useCallback","useContext","useEffect","useMemo","useState","PropsContext","ReplyingTo","UrlPreviewBubble","MediaType","MessageStatus","ChatEmitter","extractUrlFromString","fetchMetaData","Skeleton","ALL_PATERNS_SHAPES","HASHTAG_PATTERN_SHAPE","LoadAllPaternShapes","loadParsedText","MENTION_PATTERN_SHAPE","URL_PATTERN_SHAPE","PhotoView","ContextMenuWrapper","ParsedText","_ChatBubble","props","message","children","propsContext","mediaLoaded","setMediaLoaded","showMedia","setShowMedia","showUrlPreview","setShowUrlPreview","urlPreviewData","setUrlPreviewData","createdAt","format","avatarSize","width","bubbleProps","showAvatars","height","borderRadius","_propsContext$bubbleP7","_propsContext$bubbleP8","bubbleBackgroundColor","_propsContext$bubbleP9","containerStyle","me","backgroundColor","_propsContext$bubbleP11","selfBubbleColor","_propsContext$bubbleP13","otherBubbleColor","_propsContext$bubbleP15","_propsContext$bubbleP17","_propsContext$bubbleP18","_propsContext$bubbleP19","_propsContext$bubbleP20","bubbleAlignment","alignSelf","media","forEach","type","Image","InteractionManager","runAfterInteractions","prefetch","uri","then","enableUrlPreviews","url","text","data","onPressPattern","pattern","index","emit","messagePatterns","patterns","enablePatterns","patternProps","_propsContext$pattern","customPatterns","push","_propsContext$pattern2","allowPatterns","_propsContext$pattern3","_propsContext$pattern4","renderTicks","status","Sending","_propsContext$bubbleP22","tickProps","_propsContext$bubbleP23","sendingElement","Text","Sent","_propsContext$bubbleP25","_propsContext$bubbleP26","sentElement","Delivered","_propsContext$bubbleP28","_propsContext$bubbleP29","deliveredElement","Read","_propsContext$bubbleP31","_propsContext$bubbleP32","readElement","_propsContext$bubbleP33","_propsContext$bubbleP34","_propsContext$bubbleP35","_propsContext$bubbleP36","_propsContext$bubbleP37","_propsContext$bubbleP38","_propsContext$bubbleP39","_propsContext$bubbleP40","renderFooter","View","style","styles","bubbleFooter","date","dateStyle","_propsContext$bubbleP42","_propsContext$bubbleP43","renderCornerRounding","enableCornerRounding","rightArrow","rightArrowOverlap","listProps","_propsContext$listPro2","_propsContext$listPro3","leftArrow","leftArrowOverlap","_propsContext$listPro5","_propsContext$listPro6","_propsContext$bubbleP45","_propsContext$listPro7","_propsContext$listPro8","renderMedia","flexDirection","flexWrap","map","TouchableOpacity","onPress","show","source","length","ImageBackground","_message$media$","imageStyle","backgroundOverlay","color","textAlign","fontSize","images","imageIndex","visible","onRequestClose","renderUrlPreview","repliedTo","marginTop","title","description","image","wrapper","trailingAccessory","user","avatar","require","container","_propsContext$bubbleP49","padding","username","_message$repliedTo","messageId","id","parse","labelStyle","_propsContext$bubbleP51","_propsContext$bubbleP53","avatarMe","ChatBubble","memo","StyleSheet","create","alignItems","justifyContent","margin","maxWidth","Dimensions","get","position","bottom","borderBottomLeftRadius","right","borderBottomRightRadius","left","marginLeft","marginRight","moreMedia","borderWidth","borderStyle","borderColor","marginBottom","alignContent"],"sources":["ChatBubble.tsx"],"sourcesContent":["import dayjs from 'dayjs';\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  Dimensions,\n  Image,\n  ImageBackground,\n  InteractionManager,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n  ViewStyle,\n} from 'react-native';\nimport { PropsContext } from './Chatty';\nimport { ReplyingTo } from './components/ReplyingTo';\nimport { UrlPreviewBubble } from './components/UrlPreviewBubble';\nimport {\n  IChatBubble,\n  IMessage,\n  IUrlPreviewBubble,\n  MediaType,\n  MessageStatus,\n} from './types/Chatty.types';\nimport { ChatEmitter } from './utils/eventEmitter';\nimport { extractUrlFromString, fetchMetaData } from './utils/helpers';\nimport { Skeleton } from './utils/moti';\nimport {\n  ALL_PATERNS_SHAPES,\n  HASHTAG_PATTERN_SHAPE,\n  LoadAllPaternShapes,\n  loadParsedText,\n  MENTION_PATTERN_SHAPE,\n  URL_PATTERN_SHAPE,\n} from './utils/patterns';\nimport { PhotoView } from './utils/photoView';\nimport { ContextMenuWrapper } from './wrappers/ContextMenuWrapper';\n\nconst ParsedText = loadParsedText();\n\nfunction _ChatBubble(props: IChatBubble) {\n  const { message, children } = props;\n  const propsContext = useContext(PropsContext);\n  const [mediaLoaded, setMediaLoaded] = useState<boolean>(false);\n  const [showMedia, setShowMedia] = useState<boolean>(false);\n  const [showUrlPreview, setShowUrlPreview] = useState(false);\n  const [urlPreviewData, setUrlPreviewData] = useState<IUrlPreviewBubble>();\n  const createdAt = useMemo(() => {\n    return message && dayjs(message.createdAt).format('HH:mm');\n  }, [message]);\n\n  const avatarSize = useMemo(() => {\n    return {\n      width: propsContext.bubbleProps?.showAvatars?.width || 40,\n      height: propsContext.bubbleProps?.showAvatars?.width || 40,\n      borderRadius: propsContext.bubbleProps?.showAvatars?.width || 40,\n    };\n  }, [propsContext.bubbleProps?.showAvatars?.width]);\n\n  const bubbleBackgroundColor = useMemo<ViewStyle>(() => {\n    if (propsContext.bubbleProps?.containerStyle) {\n      if (message?.me) {\n        return {\n          backgroundColor:\n            propsContext?.bubbleProps?.selfBubbleColor ?? '#afddfa',\n          ...propsContext.bubbleProps.containerStyle,\n        };\n      } else {\n        return {\n          backgroundColor:\n            propsContext?.bubbleProps?.otherBubbleColor ?? '#c8faaf',\n\n          ...propsContext.bubbleProps.containerStyle,\n        };\n      }\n    }\n\n    if (message?.me) {\n      return {\n        backgroundColor:\n          propsContext?.bubbleProps?.selfBubbleColor ?? '#afddfa',\n      };\n    }\n\n    return {\n      backgroundColor: propsContext?.bubbleProps?.otherBubbleColor ?? '#c8faaf',\n    };\n  }, [\n    message?.me,\n    propsContext?.bubbleProps?.otherBubbleColor,\n    propsContext?.bubbleProps?.selfBubbleColor,\n    propsContext.bubbleProps?.containerStyle,\n  ]);\n\n  const bubbleAlignment = useMemo<ViewStyle>(() => {\n    if (message?.me) {\n      return {\n        alignSelf: 'flex-end',\n      };\n    }\n\n    return {\n      alignSelf: 'flex-start',\n    };\n  }, [message?.me]);\n\n  useEffect(() => {\n    if (message?.media) {\n      message.media.forEach((media) => {\n        if (media.type === MediaType.Image) {\n          InteractionManager.runAfterInteractions(() => {\n            Image.prefetch(media.uri).then(() => {\n              setMediaLoaded(true);\n            });\n          });\n        }\n      });\n    }\n\n    if (propsContext.enableUrlPreviews) {\n      InteractionManager.runAfterInteractions(async () => {\n        const url = extractUrlFromString(message?.text ?? '');\n\n        if (url) {\n          const data = await fetchMetaData(url);\n\n          if (data) {\n            setShowUrlPreview(true);\n            setUrlPreviewData(data);\n          }\n        }\n      });\n    }\n  }, [message?.media, message?.text, propsContext.enableUrlPreviews]);\n\n  const onPressPattern = useCallback(\n    (pattern: string, index: number) => {\n      if (!message) return;\n      ChatEmitter?.emit('patternPressed', pattern, index, message);\n    },\n    [message]\n  );\n\n  const messagePatterns = useMemo(() => {\n    const patterns: any[] = [];\n\n    if (!propsContext?.enablePatterns) return;\n    if (!ParsedText) return;\n\n    LoadAllPaternShapes(onPressPattern);\n\n    if (propsContext.patternProps?.customPatterns) {\n      patterns.push(...propsContext.patternProps.customPatterns);\n    }\n\n    if (propsContext?.patternProps?.allowPatterns) {\n      propsContext.patternProps.allowPatterns.forEach((pattern) => {\n        switch (pattern) {\n          case 'hashtag':\n            patterns.push(HASHTAG_PATTERN_SHAPE);\n            break;\n          case 'mention':\n            patterns.push(MENTION_PATTERN_SHAPE);\n            break;\n          case 'url':\n            patterns.push(URL_PATTERN_SHAPE);\n            break;\n        }\n      });\n    } else {\n      ALL_PATERNS_SHAPES.forEach((pattern) => patterns.push(pattern));\n    }\n\n    return patterns;\n  }, [\n    onPressPattern,\n    propsContext?.enablePatterns,\n    propsContext?.patternProps?.allowPatterns,\n    propsContext?.patternProps?.customPatterns,\n  ]);\n\n  const renderTicks = useCallback(() => {\n    if (message?.status) {\n      switch (message.status) {\n        case MessageStatus.Sending:\n          return (\n            propsContext.bubbleProps?.tickProps?.sendingElement ?? (\n              <Text>🔄</Text>\n            )\n          );\n\n        case MessageStatus.Sent:\n          return (\n            propsContext.bubbleProps?.tickProps?.sentElement ?? <Text>✔</Text>\n          );\n\n        case MessageStatus.Delivered:\n          return (\n            propsContext.bubbleProps?.tickProps?.deliveredElement ?? (\n              <Text>☑</Text>\n            )\n          );\n\n        case MessageStatus.Read:\n          return (\n            propsContext.bubbleProps?.tickProps?.readElement ?? <Text>✅</Text>\n          );\n      }\n    }\n\n    return null;\n  }, [\n    message?.status,\n    propsContext.bubbleProps?.tickProps?.deliveredElement,\n    propsContext.bubbleProps?.tickProps?.readElement,\n    propsContext.bubbleProps?.tickProps?.sendingElement,\n    propsContext.bubbleProps?.tickProps?.sentElement,\n  ]);\n\n  const renderFooter = useCallback(() => {\n    return (\n      <View style={styles.bubbleFooter}>\n        <Text\n          style={[\n            styles.date,\n            propsContext?.bubbleProps?.dateStyle &&\n              propsContext?.bubbleProps?.dateStyle!(message?.me ?? false),\n          ]}\n        >\n          {createdAt}\n        </Text>\n        {renderTicks()}\n      </View>\n    );\n  }, [\n    createdAt,\n    message?.me,\n    propsContext?.bubbleProps?.dateStyle,\n    renderTicks,\n  ]);\n\n  const renderCornerRounding = useCallback(() => {\n    if (propsContext.bubbleProps?.enableCornerRounding === false) return null;\n\n    if (message?.me) {\n      return (\n        <>\n          <View style={[styles.rightArrow, bubbleBackgroundColor]}></View>\n          <View\n            style={[\n              styles.rightArrowOverlap,\n              {\n                backgroundColor:\n                  propsContext.listProps?.containerStyle?.backgroundColor ??\n                  '#fff',\n              },\n            ]}\n          ></View>\n        </>\n      );\n    } else {\n      return (\n        <>\n          <View style={[styles.leftArrow, bubbleBackgroundColor]}></View>\n          <View\n            style={[\n              styles.leftArrowOverlap,\n              {\n                backgroundColor:\n                  propsContext.listProps?.containerStyle?.backgroundColor ??\n                  '#fff',\n              },\n            ]}\n          ></View>\n        </>\n      );\n    }\n  }, [\n    bubbleBackgroundColor,\n    message?.me,\n    propsContext.bubbleProps?.enableCornerRounding,\n    propsContext.listProps?.containerStyle?.backgroundColor,\n  ]);\n\n  const renderMedia = useCallback(() => {\n    if (message?.media) {\n      return (\n        <View style={{ flexDirection: 'row', flexWrap: 'wrap' }}>\n          {message?.media.map((media, index) => {\n            if (index < 3) {\n              return (\n                <TouchableOpacity onPress={() => setShowMedia(true)}>\n                  {media.type === MediaType.Image && (\n                    <Skeleton show={!mediaLoaded}>\n                      <Image source={{ uri: media.uri }} style={styles.media} />\n                    </Skeleton>\n                  )}\n                </TouchableOpacity>\n              );\n            }\n\n            return null;\n          })}\n\n          {message.media.length > 3 && (\n            <TouchableOpacity onPress={() => setShowMedia(true)}>\n              <ImageBackground\n                style={styles.media}\n                source={{ uri: message.media[3]?.uri }}\n                imageStyle={{\n                  borderRadius: 15,\n                }}\n              >\n                <View style={styles.backgroundOverlay}>\n                  <Text\n                    style={{ color: '#fff', textAlign: 'center', fontSize: 20 }}\n                  >\n                    + {message.media.length - 3}\n                  </Text>\n                </View>\n              </ImageBackground>\n            </TouchableOpacity>\n          )}\n\n          {PhotoView && (\n            <PhotoView\n              images={message?.media}\n              imageIndex={0}\n              visible={showMedia}\n              onRequestClose={() => setShowMedia(false)}\n            />\n          )}\n        </View>\n      );\n    }\n\n    return null;\n  }, [mediaLoaded, message, showMedia]);\n\n  const renderUrlPreview = useMemo(() => {\n    if (showUrlPreview && urlPreviewData && !message?.repliedTo) {\n      return (\n        <View style={{ marginTop: 10 }}>\n          <UrlPreviewBubble\n            title={urlPreviewData.title}\n            description={urlPreviewData.description}\n            image={urlPreviewData.image}\n            url={urlPreviewData.url}\n          />\n        </View>\n      );\n    }\n\n    return null;\n  }, [message?.repliedTo, showUrlPreview, urlPreviewData]);\n\n  return (\n    <View style={[styles.wrapper, bubbleAlignment]}>\n      {propsContext.bubbleProps?.trailingAccessory && message?.me && (\n        <View>{propsContext.bubbleProps.trailingAccessory}</View>\n      )}\n\n      {propsContext.bubbleProps?.showAvatars?.visible && !message?.me && (\n        <Image\n          source={\n            message?.user.avatar ?? require('./assets/images/noavatar.png')\n          }\n          style={[styles.avatar, avatarSize]}\n        />\n      )}\n\n      <ContextMenuWrapper message={message as IMessage}>\n        <View\n          style={[\n            bubbleBackgroundColor,\n            styles.container,\n            propsContext.bubbleProps?.containerStyle,\n            { padding: message?.repliedTo ? 5 : 15 },\n          ]}\n        >\n          {children ? (\n            children\n          ) : (\n            <>\n              {message?.repliedTo && (\n                <ReplyingTo\n                  username={message?.repliedTo?.user.username}\n                  text={message?.repliedTo.text}\n                  messageId={message?.repliedTo.id}\n                />\n              )}\n\n              {propsContext?.enablePatterns && ParsedText ? (\n                <>\n                  {renderMedia()}\n\n                  <ParsedText\n                    parse={messagePatterns}\n                    style={\n                      propsContext?.bubbleProps?.labelStyle &&\n                      propsContext.bubbleProps?.labelStyle(message?.me ?? false)\n                    }\n                  >\n                    {message?.text}\n                  </ParsedText>\n                  {renderUrlPreview}\n                  {renderFooter()}\n                </>\n              ) : (\n                <View>\n                  {renderMedia()}\n\n                  <Text\n                    style={\n                      propsContext?.bubbleProps?.labelStyle &&\n                      propsContext.bubbleProps?.labelStyle(message?.me ?? false)\n                    }\n                  >\n                    {message?.text}\n                  </Text>\n                  {renderUrlPreview}\n                  {renderFooter()}\n                </View>\n              )}\n            </>\n          )}\n          {renderCornerRounding()}\n        </View>\n      </ContextMenuWrapper>\n\n      {propsContext.bubbleProps?.showAvatars?.visible && message?.me && (\n        <Image\n          source={\n            message?.user.avatar ?? require('./assets/images/noavatar.png')\n          }\n          style={[styles.avatarMe, avatarSize]}\n        />\n      )}\n\n      {propsContext.bubbleProps?.trailingAccessory && !message?.me && (\n        <View>{propsContext.bubbleProps.trailingAccessory}</View>\n      )}\n    </View>\n  );\n}\n\nexport const ChatBubble = React.memo(_ChatBubble);\n\nexport const styles = StyleSheet.create({\n  wrapper: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  container: {\n    margin: 20,\n    maxWidth: Dimensions.get('screen').width - 120,\n    borderRadius: 10,\n  },\n  rightArrow: {\n    position: 'absolute',\n    width: 20,\n    height: 25,\n    bottom: 0,\n    borderBottomLeftRadius: 25,\n    right: -7,\n  },\n  rightArrowOverlap: {\n    position: 'absolute',\n    width: 20,\n    height: 35,\n    bottom: -6,\n    borderBottomLeftRadius: 18,\n    right: -20,\n  },\n  leftArrow: {\n    position: 'absolute',\n    width: 20,\n    height: 25,\n    bottom: 0,\n    borderBottomRightRadius: 25,\n    left: -10,\n  },\n\n  leftArrowOverlap: {\n    position: 'absolute',\n    width: 20,\n    height: 35,\n    bottom: -6,\n    borderBottomRightRadius: 18,\n    left: -20,\n  },\n  date: {\n    color: '#a8a8a8',\n    fontSize: 11,\n  },\n  avatar: {\n    marginLeft: 10,\n  },\n  avatarMe: {\n    marginRight: 10,\n  },\n  bubbleFooter: {\n    justifyContent: 'flex-end',\n    flexDirection: 'row',\n    marginTop: 5,\n  },\n  moreMedia: {\n    width: 100,\n    height: 100,\n    borderWidth: 1,\n    borderStyle: 'dashed',\n    borderRadius: 15,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderColor: '#ccc',\n  },\n  media: {\n    width: 110,\n    height: 100,\n    borderRadius: 15,\n    marginRight: 10,\n    marginBottom: 10,\n  },\n  backgroundOverlay: {\n    width: 110,\n    height: 100,\n    backgroundColor: 'rgba(0,0,0,0.6)',\n    borderRadius: 15,\n    justifyContent: 'center',\n    alignContent: 'center',\n    alignItems: 'center',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}