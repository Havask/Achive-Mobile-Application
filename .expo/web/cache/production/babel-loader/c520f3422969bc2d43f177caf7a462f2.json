{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{useCallback,useRef,useEffect}from\"react\";import Animated from\"react-native-web/dist/exports/Animated\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import VirtualizedList from\"react-native-web/dist/exports/VirtualizedList\";import Modal from\"react-native-web/dist/exports/Modal\";import ImageItem from\"./components/ImageItem/ImageItem\";import ImageDefaultHeader from\"./components/ImageDefaultHeader\";import StatusBarManager from\"./components/StatusBarManager\";import useAnimatedComponents from\"./hooks/useAnimatedComponents\";import useImageIndexChange from\"./hooks/useImageIndexChange\";import useRequestClose from\"./hooks/useRequestClose\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DEFAULT_ANIMATION_TYPE=\"fade\";var DEFAULT_BG_COLOR=\"#000\";var DEFAULT_DELAY_LONG_PRESS=800;var SCREEN=Dimensions.get(\"screen\");var SCREEN_WIDTH=SCREEN.width;function ImageViewing(_ref){var images=_ref.images,_keyExtractor=_ref.keyExtractor,imageIndex=_ref.imageIndex,visible=_ref.visible,onRequestClose=_ref.onRequestClose,_ref$onLongPress=_ref.onLongPress,onLongPress=_ref$onLongPress===void 0?function(){}:_ref$onLongPress,onImageIndexChange=_ref.onImageIndexChange,_ref$animationType=_ref.animationType,animationType=_ref$animationType===void 0?DEFAULT_ANIMATION_TYPE:_ref$animationType,_ref$backgroundColor=_ref.backgroundColor,backgroundColor=_ref$backgroundColor===void 0?DEFAULT_BG_COLOR:_ref$backgroundColor,presentationStyle=_ref.presentationStyle,swipeToCloseEnabled=_ref.swipeToCloseEnabled,doubleTapToZoomEnabled=_ref.doubleTapToZoomEnabled,_ref$delayLongPress=_ref.delayLongPress,delayLongPress=_ref$delayLongPress===void 0?DEFAULT_DELAY_LONG_PRESS:_ref$delayLongPress,HeaderComponent=_ref.HeaderComponent,FooterComponent=_ref.FooterComponent;var imageList=useRef(null);var _useRequestClose=useRequestClose(onRequestClose),_useRequestClose2=_slicedToArray(_useRequestClose,2),opacity=_useRequestClose2[0],onRequestCloseEnhanced=_useRequestClose2[1];var _useImageIndexChange=useImageIndexChange(imageIndex,SCREEN),_useImageIndexChange2=_slicedToArray(_useImageIndexChange,2),currentImageIndex=_useImageIndexChange2[0],onScroll=_useImageIndexChange2[1];var _useAnimatedComponent=useAnimatedComponents(),_useAnimatedComponent2=_slicedToArray(_useAnimatedComponent,3),headerTransform=_useAnimatedComponent2[0],footerTransform=_useAnimatedComponent2[1],toggleBarsVisible=_useAnimatedComponent2[2];useEffect(function(){if(onImageIndexChange){onImageIndexChange(currentImageIndex);}},[currentImageIndex]);var onZoom=useCallback(function(isScaled){var _a,_b;(_b=(_a=imageList)===null||_a===void 0?void 0:_a.current)===null||_b===void 0?void 0:_b.setNativeProps({scrollEnabled:!isScaled});toggleBarsVisible(!isScaled);},[imageList]);if(!visible){return null;}return _jsxs(Modal,{transparent:presentationStyle===\"overFullScreen\",visible:visible,presentationStyle:presentationStyle,animationType:animationType,onRequestClose:onRequestCloseEnhanced,supportedOrientations:[\"portrait\"],hardwareAccelerated:true,children:[_jsx(StatusBarManager,{presentationStyle:presentationStyle}),_jsxs(View,{style:[styles.container,{opacity:opacity,backgroundColor:backgroundColor}],children:[_jsx(Animated.View,{style:[styles.header,{transform:headerTransform}],children:typeof HeaderComponent!==\"undefined\"?React.createElement(HeaderComponent,{imageIndex:currentImageIndex}):_jsx(ImageDefaultHeader,{onRequestClose:onRequestCloseEnhanced})}),_jsx(VirtualizedList,{ref:imageList,data:images,horizontal:true,pagingEnabled:true,windowSize:2,initialNumToRender:1,maxToRenderPerBatch:1,showsHorizontalScrollIndicator:false,showsVerticalScrollIndicator:false,initialScrollIndex:imageIndex,getItem:function getItem(_,index){return images[index];},getItemCount:function getItemCount(){return images.length;},getItemLayout:function getItemLayout(_,index){return{length:SCREEN_WIDTH,offset:SCREEN_WIDTH*index,index:index};},renderItem:function renderItem(_ref2){var imageSrc=_ref2.item;return _jsx(ImageItem,{onZoom:onZoom,imageSrc:imageSrc,onRequestClose:onRequestCloseEnhanced,onLongPress:onLongPress,delayLongPress:delayLongPress,swipeToCloseEnabled:swipeToCloseEnabled,doubleTapToZoomEnabled:doubleTapToZoomEnabled});},onMomentumScrollEnd:onScroll,keyExtractor:function keyExtractor(imageSrc,index){return _keyExtractor?_keyExtractor(imageSrc,index):typeof imageSrc===\"number\"?\"\"+imageSrc:imageSrc.uri;}}),typeof FooterComponent!==\"undefined\"&&_jsx(Animated.View,{style:[styles.footer,{transform:footerTransform}],children:React.createElement(FooterComponent,{imageIndex:currentImageIndex})})]})]});}var styles=StyleSheet.create({container:{flex:1,backgroundColor:\"#000\"},header:{position:\"absolute\",width:\"100%\",zIndex:1,top:0},footer:{position:\"absolute\",width:\"100%\",zIndex:1,bottom:0}});var EnhancedImageViewing=function EnhancedImageViewing(props){return _jsx(ImageViewing,_objectSpread({},props),props.imageIndex);};export default EnhancedImageViewing;","map":{"version":3,"names":["React","useCallback","useRef","useEffect","ImageItem","ImageDefaultHeader","StatusBarManager","useAnimatedComponents","useImageIndexChange","useRequestClose","DEFAULT_ANIMATION_TYPE","DEFAULT_BG_COLOR","DEFAULT_DELAY_LONG_PRESS","SCREEN","Dimensions","get","SCREEN_WIDTH","width","ImageViewing","images","keyExtractor","imageIndex","visible","onRequestClose","onLongPress","onImageIndexChange","animationType","backgroundColor","presentationStyle","swipeToCloseEnabled","doubleTapToZoomEnabled","delayLongPress","HeaderComponent","FooterComponent","imageList","opacity","onRequestCloseEnhanced","currentImageIndex","onScroll","headerTransform","footerTransform","toggleBarsVisible","onZoom","isScaled","_a","_b","current","setNativeProps","scrollEnabled","styles","container","header","transform","createElement","_","index","length","offset","imageSrc","item","uri","footer","StyleSheet","create","flex","position","zIndex","top","bottom","EnhancedImageViewing","props"],"sources":["/Users/havardskjaerstein/Desktop/Achive/node_modules/react-native-image-viewing/dist/ImageViewing.js"],"sourcesContent":["/**\n * Copyright (c) JOB TODAY S.A. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport React, { useCallback, useRef, useEffect } from \"react\";\nimport { Animated, Dimensions, StyleSheet, View, VirtualizedList, Modal, } from \"react-native\";\nimport ImageItem from \"./components/ImageItem/ImageItem\";\nimport ImageDefaultHeader from \"./components/ImageDefaultHeader\";\nimport StatusBarManager from \"./components/StatusBarManager\";\nimport useAnimatedComponents from \"./hooks/useAnimatedComponents\";\nimport useImageIndexChange from \"./hooks/useImageIndexChange\";\nimport useRequestClose from \"./hooks/useRequestClose\";\nconst DEFAULT_ANIMATION_TYPE = \"fade\";\nconst DEFAULT_BG_COLOR = \"#000\";\nconst DEFAULT_DELAY_LONG_PRESS = 800;\nconst SCREEN = Dimensions.get(\"screen\");\nconst SCREEN_WIDTH = SCREEN.width;\nfunction ImageViewing({ images, keyExtractor, imageIndex, visible, onRequestClose, onLongPress = () => { }, onImageIndexChange, animationType = DEFAULT_ANIMATION_TYPE, backgroundColor = DEFAULT_BG_COLOR, presentationStyle, swipeToCloseEnabled, doubleTapToZoomEnabled, delayLongPress = DEFAULT_DELAY_LONG_PRESS, HeaderComponent, FooterComponent, }) {\n    const imageList = useRef(null);\n    const [opacity, onRequestCloseEnhanced] = useRequestClose(onRequestClose);\n    const [currentImageIndex, onScroll] = useImageIndexChange(imageIndex, SCREEN);\n    const [headerTransform, footerTransform, toggleBarsVisible] = useAnimatedComponents();\n    useEffect(() => {\n        if (onImageIndexChange) {\n            onImageIndexChange(currentImageIndex);\n        }\n    }, [currentImageIndex]);\n    const onZoom = useCallback((isScaled) => {\n        var _a, _b;\n        // @ts-ignore\n        (_b = (_a = imageList) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.setNativeProps({ scrollEnabled: !isScaled });\n        toggleBarsVisible(!isScaled);\n    }, [imageList]);\n    if (!visible) {\n        return null;\n    }\n    return (<Modal transparent={presentationStyle === \"overFullScreen\"} visible={visible} presentationStyle={presentationStyle} animationType={animationType} onRequestClose={onRequestCloseEnhanced} supportedOrientations={[\"portrait\"]} hardwareAccelerated>\n      <StatusBarManager presentationStyle={presentationStyle}/>\n      <View style={[styles.container, { opacity, backgroundColor }]}>\n        <Animated.View style={[styles.header, { transform: headerTransform }]}>\n          {typeof HeaderComponent !== \"undefined\" ? (React.createElement(HeaderComponent, {\n        imageIndex: currentImageIndex,\n    })) : (<ImageDefaultHeader onRequestClose={onRequestCloseEnhanced}/>)}\n        </Animated.View>\n        <VirtualizedList ref={imageList} data={images} horizontal pagingEnabled windowSize={2} initialNumToRender={1} maxToRenderPerBatch={1} showsHorizontalScrollIndicator={false} showsVerticalScrollIndicator={false} initialScrollIndex={imageIndex} getItem={(_, index) => images[index]} getItemCount={() => images.length} getItemLayout={(_, index) => ({\n        length: SCREEN_WIDTH,\n        offset: SCREEN_WIDTH * index,\n        index,\n    })} renderItem={({ item: imageSrc }) => (<ImageItem onZoom={onZoom} imageSrc={imageSrc} onRequestClose={onRequestCloseEnhanced} onLongPress={onLongPress} delayLongPress={delayLongPress} swipeToCloseEnabled={swipeToCloseEnabled} doubleTapToZoomEnabled={doubleTapToZoomEnabled}/>)} onMomentumScrollEnd={onScroll} \n    //@ts-ignore\n    keyExtractor={(imageSrc, index) => keyExtractor\n        ? keyExtractor(imageSrc, index)\n        : typeof imageSrc === \"number\"\n            ? `${imageSrc}`\n            : imageSrc.uri}/>\n        {typeof FooterComponent !== \"undefined\" && (<Animated.View style={[styles.footer, { transform: footerTransform }]}>\n            {React.createElement(FooterComponent, {\n        imageIndex: currentImageIndex,\n    })}\n          </Animated.View>)}\n      </View>\n    </Modal>);\n}\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: \"#000\",\n    },\n    header: {\n        position: \"absolute\",\n        width: \"100%\",\n        zIndex: 1,\n        top: 0,\n    },\n    footer: {\n        position: \"absolute\",\n        width: \"100%\",\n        zIndex: 1,\n        bottom: 0,\n    },\n});\nconst EnhancedImageViewing = (props) => (<ImageViewing key={props.imageIndex} {...props}/>);\nexport default EnhancedImageViewing;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}