{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import{OverlayContainer}from'@react-native-aria/overlays';import React from'react';import Platform from\"react-native-web/dist/exports/Platform\";import Modal from\"react-native-web/dist/exports/Modal\";import{useKeyboardDismissable}from\"../../../hooks\";import{ExitAnimationContext}from\"./ExitAnimationContext\";export function Overlay(_ref){var children=_ref.children,isOpen=_ref.isOpen,_ref$useRNModalOnAndr=_ref.useRNModalOnAndroid,useRNModalOnAndroid=_ref$useRNModalOnAndr===void 0?false:_ref$useRNModalOnAndr,_ref$isKeyboardDismis=_ref.isKeyboardDismissable,isKeyboardDismissable=_ref$isKeyboardDismis===void 0?true:_ref$isKeyboardDismis,_ref$animationPreset=_ref.animationPreset,animationPreset=_ref$animationPreset===void 0?'fade':_ref$animationPreset,onRequestClose=_ref.onRequestClose,style=_ref.style,unmountOnExit=_ref.unmountOnExit;var _React$useState=React.useState(!isOpen),_React$useState2=_slicedToArray(_React$useState,2),exited=_React$useState2[0],setExited=_React$useState2[1];useKeyboardDismissable({enabled:isOpen&&isKeyboardDismissable,callback:onRequestClose?onRequestClose:function(){}});var styleObj=_objectSpread({},style);if(animationPreset==='slide'){styleObj.overflow='hidden';styleObj.display='flex';}else{styleObj.display=exited&&!isOpen?'none':'flex';}if(Platform.OS==='android'&&useRNModalOnAndroid){return React.createElement(ExitAnimationContext.Provider,{value:{exited:exited,setExited:setExited}},React.createElement(Modal,{transparent:true,visible:isOpen,onRequestClose:onRequestClose,animationType:animationPreset},children));}if(unmountOnExit&&!isOpen&&exited){return null;}return React.createElement(OverlayContainer,{style:_objectSpread({},styleObj)},React.createElement(ExitAnimationContext.Provider,{value:{exited:exited,setExited:setExited}},children));}","map":{"version":3,"mappings":"y4BACA,OAASA,gBAAT,KAAiC,6BAAjC,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,oHAGA,OAASC,sBAAT,sBACA,OAASC,oBAAT,8BAcA,MAAO,SAASC,QAAT,MAUW,IAThBC,SASgB,MAThBA,QASgB,CARhBC,MAQgB,MARhBA,MAQgB,4BAPhBC,mBAOgB,CAPhBA,mBAOgB,gCAPM,KAON,kDANhBC,qBAMgB,CANhBA,qBAMgB,gCANQ,IAMR,iDAJhBC,eAIgB,CAJhBA,eAIgB,+BAJE,MAIF,sBAHhBC,cAGgB,MAHhBA,cAGgB,CAFhBC,KAEgB,MAFhBA,KAEgB,CADhBC,aACgB,MADhBA,aACgB,CAChB,oBAA4BX,KAAK,CAACY,QAANZ,CAAe,CAACK,MAAhBL,CAA5B,oDAAOa,MAAP,qBAAeC,SAAf,qBAEAb,sBAAsB,CAAC,CACrBc,OAAO,CAAEV,MAAM,EAAIE,qBADE,CAErBS,QAAQ,CAAEP,cAAc,CAAGA,cAAH,CAAoB,UAAM,CAAE,CAF/B,CAAD,CAAtBR,CAIA,GAAMgB,SAAQ,kBAAQP,KAAR,CAAd,CACA,GAAIF,eAAe,GAAK,OAAxB,CAAiC,CAC/BS,QAAQ,CAACC,QAATD,CAAoB,QAApBA,CACAA,QAAQ,CAACE,OAATF,CAAmB,MAAnBA,CAFF,KAGO,CACLA,QAAQ,CAACE,OAATF,CAAmBJ,MAAM,EAAI,CAACR,MAAXQ,CAAoB,MAApBA,CAA6B,MAAhDI,CACD,CAED,GAAIG,QAAQ,CAACC,EAATD,GAAgB,SAAhBA,EAA6Bd,mBAAjC,CAAsD,CACpD,MACEN,qBAACE,oBAAD,CAAsBoB,QAAtB,EAA+BC,KAAK,CAAE,CAAEV,MAAF,CAAEA,MAAF,CAAUC,mBAAV,CAAtC,EACEd,oBAACwB,KAAD,EACEC,WAAW,KADb,CAEEC,OAAO,CAAErB,MAFX,CAGEI,cAAc,CAAEA,cAHlB,CAIEkB,aAAa,CAAEnB,eAJjB,EAMGJ,QANH,CADF,CADF,CAYD,CAED,GAAIO,aAAa,EAAI,CAACN,MAAlBM,EAA4BE,MAAhC,CAAwC,CACtC,MAAO,KAAP,CACD,CAED,MAEEb,qBAACD,gBAAD,EAAkBW,KAAK,kBAAOO,QAAP,CAAvB,EACEjB,oBAACE,oBAAD,CAAsBoB,QAAtB,EAA+BC,KAAK,CAAE,CAAEV,MAAF,CAAEA,MAAF,CAAUC,mBAAV,CAAtC,EACGV,QADH,CADF,CAFF,CAQD","names":["OverlayContainer","React","useKeyboardDismissable","ExitAnimationContext","Overlay","children","isOpen","useRNModalOnAndroid","isKeyboardDismissable","animationPreset","onRequestClose","style","unmountOnExit","useState","exited","setExited","enabled","callback","styleObj","overflow","display","Platform","OS","Provider","value","Modal","transparent","visible","animationType"],"sources":["Overlay.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { OverlayContainer } from '@react-native-aria/overlays';\nimport React from 'react';\nimport { Platform, ViewStyle } from 'react-native';\nimport { Modal } from 'react-native';\nimport { useKeyboardDismissable } from '../../../hooks';\nimport { ExitAnimationContext } from './ExitAnimationContext';\n\nexport interface IOverlayProps {\n  isOpen?: boolean;\n  children?: any;\n  // We use RN modal on android if needed as it supports shifting accessiblity focus to the opened view. IOS automatically shifts focus if an absolutely placed view appears in front.\n  useRNModalOnAndroid?: boolean;\n  onRequestClose?: (() => any) | undefined;\n  isKeyboardDismissable?: boolean;\n  animationPreset?: 'fade' | 'slide' | 'none';\n  style?: ViewStyle;\n  unmountOnExit?: boolean;\n}\n\nexport function Overlay({\n  children,\n  isOpen,\n  useRNModalOnAndroid = false,\n  isKeyboardDismissable = true,\n  //@ts-ignore\n  animationPreset = 'fade',\n  onRequestClose,\n  style,\n  unmountOnExit,\n}: IOverlayProps) {\n  const [exited, setExited] = React.useState(!isOpen);\n\n  useKeyboardDismissable({\n    enabled: isOpen && isKeyboardDismissable,\n    callback: onRequestClose ? onRequestClose : () => {},\n  });\n  const styleObj = { ...style };\n  if (animationPreset === 'slide') {\n    styleObj.overflow = 'hidden';\n    styleObj.display = 'flex';\n  } else {\n    styleObj.display = exited && !isOpen ? 'none' : 'flex';\n  }\n\n  if (Platform.OS === 'android' && useRNModalOnAndroid) {\n    return (\n      <ExitAnimationContext.Provider value={{ exited, setExited }}>\n        <Modal\n          transparent\n          visible={isOpen}\n          onRequestClose={onRequestClose}\n          animationType={animationPreset}\n        >\n          {children}\n        </Modal>\n      </ExitAnimationContext.Provider>\n    );\n  }\n\n  if (unmountOnExit && !isOpen && exited) {\n    return null;\n  }\n\n  return (\n    //@ts-ignore\n    <OverlayContainer style={{ ...styleObj }}>\n      <ExitAnimationContext.Provider value={{ exited, setExited }}>\n        {children}\n      </ExitAnimationContext.Provider>\n    </OverlayContainer>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}