{"ast":null,"code":"import _taggedTemplateLiteralLoose from\"@babel/runtime/helpers/taggedTemplateLiteralLoose\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _templateObject,_templateObject2;import _regeneratorRuntime from\"@babel/runtime/regenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{useEffect}from\"react\";import{UserContext}from\"../context/UserContext\";import{FirebaseContext}from\"../context/FirebaseContext\";import{useContext}from\"react\";import styled from\"styled-components/native\";import LottieView from\"lottie-react-native\";import*as SecureStore from'expo-secure-store';import{jsx as _jsx}from\"react/jsx-runtime\";export default LoadingScreen=function LoadingScreen(){var firebase=useContext(FirebaseContext);var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),User=_useContext2[0],setUser=_useContext2[1];useEffect(function(){setTimeout(function _callee(){var value,parsedJson;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(SecureStore.getItemAsync(\"User\"));case 3:value=_context.sent;if(!(value!==null)){_context.next=17;break;}parsedJson=JSON.parse(value);if(!(parsedJson.email&&parsedJson.password)){_context.next=11;break;}_context.next=9;return _regeneratorRuntime.awrap(firebase.SignInUser(parsedJson.email,parsedJson.password));case 9:_context.next=13;break;case 11:setUser(function(state){return _objectSpread(_objectSpread({},state),{},{isLoggedIn:false});});return _context.abrupt(\"return\");case 13:_context.next=15;return _regeneratorRuntime.awrap(setUser({username:parsedJson.username,email:parsedJson.email,password:parsedJson.password,uid:parsedJson.uid,groups:parsedJson.groups,profilePhotoUrl:parsedJson.profilePhotoUrl,isLoggedIn:parsedJson.isLoggedIn}));case 15:_context.next=18;break;case 17:setUser(function(state){return _objectSpread(_objectSpread({},state),{},{isLoggedIn:false});});case 18:_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](0);console.log(\"Error @LoadingScreen\",_context.t0);case 23:case\"end\":return _context.stop();}}},null,null,[[0,20]],Promise);},500);},[]);return _jsx(Container,{children:_jsx(LottieView,{source:require(\"../assets/prog.json\"),autoPlay:true,loop:true,style:{width:\"100%\",marginBottom:50}})});};var Container=styled.View(_templateObject||(_templateObject=_taggedTemplateLiteralLoose([\"\\n    flex: 1; \\n    align-items: center; \\n    justify-content: center; \\n\\n\"])));var AchiveLogo=styled.Image(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose([\"\\n    align-items: center; \\n    justify-content: center; \\n    width: 250px;\\n    height: 150px;\\n    margin: 0px 90px 0px; \\n\"])));","map":{"version":3,"names":["React","useEffect","UserContext","FirebaseContext","useContext","styled","LottieView","SecureStore","LoadingScreen","firebase","User","setUser","setTimeout","getItemAsync","value","parsedJson","JSON","parse","email","password","SignInUser","state","isLoggedIn","username","uid","groups","profilePhotoUrl","console","log","require","width","marginBottom","Container","View","AchiveLogo","Image"],"sources":["/Users/havardskjaerstein/Desktop/Achive/screens/LoadingScreen.js"],"sourcesContent":["import React, {useEffect} from \"react\";\nimport {UserContext} from \"../context/UserContext\"\nimport {FirebaseContext} from \"../context/FirebaseContext\"\nimport { useContext } from \"react\";\nimport styled from \"styled-components/native\"\nimport LottieView from \"lottie-react-native\";\nimport * as SecureStore from 'expo-secure-store';\n\nexport default LoadingScreen = () => {\n\n    const firebase = useContext(FirebaseContext); \n    const [User, setUser] = useContext(UserContext); \n\n    useEffect(() => {\n        setTimeout(async () => {\n\n            try{\n                const value = await SecureStore.getItemAsync(\"User\");\n\n                if (value !== null) {\n                    \n                    const parsedJson = JSON.parse(value)\n                  \n\n                    if (parsedJson.email && parsedJson.password){\n                        await firebase.SignInUser(parsedJson.email, parsedJson.password);\n                    }else{\n                        setUser((state) => ({ ...state, isLoggedIn: false})); \n                        return; \n                    }\n\n                    await setUser({\n                        username: parsedJson.username,\n                        email: parsedJson.email, \n                        password: parsedJson.password,\n                        uid: parsedJson.uid, \n                        groups: parsedJson.groups, \n                        profilePhotoUrl: parsedJson.profilePhotoUrl,\n                        isLoggedIn: parsedJson.isLoggedIn, \n                      })\n            \n                }else{\n                    setUser((state) => ({ ...state, isLoggedIn: false})); \n                }\n            }catch(error){\n                console.log(\"Error @LoadingScreen\", error)\n            }\n        }, 500)\n    }, [])\n\n    //<AchiveLogo source = {require(\"../logo/logo.png\")} />\n    return (\n        <Container>\n\n            <LottieView \n                source={require(\"../assets/prog.json\")}\n                autoPlay\n                loop\n                style={{width: \"100%\", marginBottom: 50}}\n                >\n            </LottieView>\n        </Container>\n    );\n}\n\nconst Container = styled.View`\n    flex: 1; \n    align-items: center; \n    justify-content: center; \n\n`\n\nconst AchiveLogo = styled.Image`\n    align-items: center; \n    justify-content: center; \n    width: 250px;\n    height: 150px;\n    margin: 0px 90px 0px; \n`;"],"mappings":"qkCAAA,MAAOA,MAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,WAAR,8BACA,OAAQC,eAAR,kCACA,OAASC,UAAT,KAA2B,OAA3B,CACA,MAAOC,OAAP,KAAmB,0BAAnB,CACA,MAAOC,WAAP,KAAuB,qBAAvB,CACA,MAAO,GAAKC,YAAZ,KAA6B,mBAA7B,C,2CAEA,cAAeC,cAAa,CAAG,wBAAM,CAEjC,GAAMC,SAAQ,CAAGL,UAAU,CAACD,eAAD,CAA3B,CACA,gBAAwBC,UAAU,CAACF,WAAD,CAAlC,4CAAOQ,IAAP,iBAAaC,OAAb,iBAEAV,SAAS,CAAC,UAAM,CACZW,UAAU,CAAC,0NAGiBL,WAAW,CAACM,YAAZ,CAAyB,MAAzB,CAHjB,SAGGC,KAHH,oBAKCA,KAAK,GAAK,IALX,2BAOOC,UAPP,CAOoBC,IAAI,CAACC,KAAL,CAAWH,KAAX,CAPpB,MAUKC,UAAU,CAACG,KAAX,EAAoBH,UAAU,CAACI,QAVpC,4EAWWV,QAAQ,CAACW,UAAT,CAAoBL,UAAU,CAACG,KAA/B,CAAsCH,UAAU,CAACI,QAAjD,CAXX,wCAaKR,OAAO,CAAC,SAACU,KAAD,wCAAiBA,KAAjB,MAAwBC,UAAU,CAAE,KAApC,IAAD,CAAP,CAbL,2FAiBOX,OAAO,CAAC,CACVY,QAAQ,CAAER,UAAU,CAACQ,QADX,CAEVL,KAAK,CAAEH,UAAU,CAACG,KAFR,CAGVC,QAAQ,CAAEJ,UAAU,CAACI,QAHX,CAIVK,GAAG,CAAET,UAAU,CAACS,GAJN,CAKVC,MAAM,CAAEV,UAAU,CAACU,MALT,CAMVC,eAAe,CAAEX,UAAU,CAACW,eANlB,CAOVJ,UAAU,CAAEP,UAAU,CAACO,UAPb,CAAD,CAjBd,yCA4BCX,OAAO,CAAC,SAACU,KAAD,wCAAiBA,KAAjB,MAAwBC,UAAU,CAAE,KAApC,IAAD,CAAP,CA5BD,yFA+BHK,OAAO,CAACC,GAAR,CAAY,sBAAZ,cA/BG,0EAAD,CAiCP,GAjCO,CAAV,CAkCH,CAnCQ,CAmCN,EAnCM,CAAT,CAsCA,MACI,MAAC,SAAD,WAEI,KAAC,UAAD,EACI,MAAM,CAAEC,OAAO,uBADnB,CAEI,QAAQ,KAFZ,CAGI,IAAI,KAHR,CAII,KAAK,CAAE,CAACC,KAAK,CAAE,MAAR,CAAgBC,YAAY,CAAE,EAA9B,CAJX,EAFJ,EADJ,CAYH,CAvDD,CAyDA,GAAMC,UAAS,CAAG3B,MAAM,CAAC4B,IAAV,mJAAf,CAOA,GAAMC,WAAU,CAAG7B,MAAM,CAAC8B,KAAV,uMAAhB"},"metadata":{},"sourceType":"module"}