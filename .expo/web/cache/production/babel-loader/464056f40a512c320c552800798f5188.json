{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{useState,useContext}from\"react\";import*as ImagePicker from\"expo-image-picker\";import{FirebaseContext}from\"../../context/FirebaseContext\";import{UserContext}from\"../../context/UserContext\";import{Box,Text,Pressable,Heading,IconButton,Icon,HStack,Avatar,VStack,Spacer,Center,Image,Divider,Stack,Button,FormControl,Input,Link,WarningOutlineIcon}from\"native-base\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default SignUpScreen=function SignUpScreen(_ref){var navigation=_ref.navigation;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),ValidPassword=_useState2[0],setValidPassword=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ValidUsername=_useState4[0],setValidUsername=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),ValidEmail=_useState6[0],setValidEmail=_useState6[1];var firebase=useContext(FirebaseContext);var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),_=_useContext2[0],setUser=_useContext2[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),username=_useState8[0],setUsername=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),profilePhoto=_useState14[0],setProfilePhoto=_useState14[1];var pickImage=function pickImage(){var result;return _regeneratorRuntime.async(function pickImage$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({mediaTypes:ImagePicker.MediaTypeOptions.All,allowsEditing:true,aspect:[4,3],quality:1}));case 2:result=_context.sent;if(!result.cancelled){setProfilePhoto(result.uri);setUser(function(state){return _objectSpread(_objectSpread({},state),{},{profilePhotoUrl:result.uri});});}case 4:case\"end\":return _context.stop();}}},null,null,null,Promise);};var signUp=function signUp(){var user,createdUser;return _regeneratorRuntime.async(function signUp$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;console.log(\"email\",email);console.log(\"password\",password);user={username:username,email:email,password:password,profilePhoto:profilePhoto};_context2.next=6;return _regeneratorRuntime.awrap(firebase.createUser(user));case 6:createdUser=_context2.sent;setUser(_objectSpread(_objectSpread({},createdUser),{},{isLoggedIn:true}));_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(\"Error @SignUp\",_context2.t0);case 13:case\"end\":return _context2.stop();}}},null,null,[[0,10]],Promise);};return _jsxs(Box,{p:\"7\",children:[_jsx(Box,{pb:\"10\",pt:\"81\",justifyContent:\"center\",alignItems:\"center\",children:_jsx(Heading,{fontSize:\"2xl\",children:\"Sign up to get started\"})}),_jsx(Box,{justifyContent:\"center\",alignItems:\"center\",children:_jsx(Pressable,{_pressed:{opacity:0.5},onPress:pickImage,children:_jsx(Avatar,{w:\"100\",h:\"100\",pb:\"1\",source:{uri:profilePhoto}})})}),_jsxs(VStack,{space:3,mt:\"5\",children:[_jsxs(FormControl,{isInvalid:ValidUsername,children:[_jsx(FormControl.Label,{children:\"Name\"}),_jsx(Input,{autocorrect:false,onChangeText:function onChangeText(username){return setUsername(username.trim());},value:username})]}),_jsxs(FormControl,{isInvalid:ValidEmail,children:[_jsx(FormControl.Label,{children:\"Email\"}),_jsx(Input,{autoCapitalize:\"none\",autocorrect:false,keyboardType:\"email-address\",onChangeText:function onChangeText(email){return setEmail(email.trim());},value:email}),_jsx(FormControl.ErrorMessage,{leftIcon:_jsx(WarningOutlineIcon,{size:\"xs\"}),children:\"E-mail is already taken\"})]}),_jsxs(FormControl,{isRequired:true,isInvalid:ValidPassword,children:[_jsx(FormControl.Label,{children:\"Password\"}),_jsx(Input,{type:\"password\",autoCapitalize:\"none\",autocorrect:false,secureTextEntry:true,onChangeText:function onChangeText(password){return setPassword(password.trim());},value:password}),_jsx(FormControl.HelperText,{children:\"Must be atleast 6 characters.\"}),_jsx(FormControl.ErrorMessage,{leftIcon:_jsx(WarningOutlineIcon,{size:\"xs\"}),children:\"Atleast 6 characters are required.\"})]}),_jsx(Button,{mt:\"2\",onPress:signUp,children:\"Sign up\"}),_jsxs(HStack,{mt:\"2\",justifyContent:\"center\",children:[_jsxs(Text,{fontSize:\"sm\",children:[\"Already a user?\",\" \"]}),_jsx(Link,{onPress:function onPress(){return navigation.push(\"LogInScreen\");},_text:{color:\"#88d498\",fontWeight:\"medium\",fontSize:\"sm\"},href:\"#\",children:\"Sign Up\"})]})]})]});};","map":{"version":3,"names":["React","useState","useContext","ImagePicker","FirebaseContext","UserContext","Box","Text","Pressable","Heading","IconButton","Icon","HStack","Avatar","VStack","Spacer","Center","Image","Divider","Stack","Button","FormControl","Input","Link","WarningOutlineIcon","SignUpScreen","navigation","ValidPassword","setValidPassword","ValidUsername","setValidUsername","ValidEmail","setValidEmail","firebase","_","setUser","username","setUsername","email","setEmail","password","setPassword","profilePhoto","setProfilePhoto","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","cancelled","uri","state","profilePhotoUrl","signUp","console","log","user","createUser","createdUser","isLoggedIn","opacity","trim","push","color","fontWeight","fontSize"],"sources":["/Users/havardskjaerstein/Desktop/Achive/screens/AuthScreen/SignUpScreen.js"],"sourcesContent":["import React, {useState, useContext} from \"react\";\nimport * as ImagePicker from \"expo-image-picker\"\nimport {FirebaseContext} from \"../../context/FirebaseContext\";\nimport {UserContext} from \"../../context/UserContext\";\nimport {Box, Text, Pressable, Heading, IconButton, Icon, HStack, Avatar, \n  VStack, Spacer, Center, Image,Divider,Stack, Button, FormControl, Input, Link, WarningOutlineIcon} from \"native-base\";\n\n  \n  export default SignUpScreen = ({navigation}) => {\n    \n  const [ValidPassword, setValidPassword] = useState(false); \n  const [ValidUsername, setValidUsername] = useState(false); \n  const [ValidEmail, setValidEmail] = useState(false); \n\n  const firebase = useContext(FirebaseContext); \n  const [_, setUser] = useContext(UserContext); \n  const [username, setUsername] = useState(); \n  const [email, setEmail] = useState(); \n  const [password, setPassword] = useState(); \n  const [profilePhoto, setProfilePhoto] = useState(); \n\n  const pickImage = async () => {\n\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n    \n    if (!result.cancelled) {\n      setProfilePhoto(result.uri);\n      setUser((state) => ({ ...state, profilePhotoUrl: result.uri})); \n    }\n  };\n\n  const signUp = async () => {\n    \n    try{\n\n      console.log(\"email\", email)\n      console.log(\"password\", password)\n\n      const user = {username, email, password, profilePhoto}\n      //const int = await firebase.ValidateSignUpForm(email, password)\n/*\n      //valides the form\n      if(int === 1){\n        console.log(\"Password too weak\")\n        \n        setValidEmail(false)\n        setValidPassword(true)\n        return; \n      }\n      if(int === 2){\n        console.log(\"Email already exist\")\n        setValidEmail(true)\n        setEmail(\"\")\n        return;\n      }\n      if(int === 3){\n        console.log(\"Username already exist\")\n        setValidUsername(true)\n        return; \n       }\n       */\n\n      const createdUser = await firebase.createUser(user)\n      setUser({...createdUser, isLoggedIn: true}); \n\n\n    }catch(error){\n      console.log(\"Error @SignUp\", error); \n    }\n  };\n\n  return(\n    <Box p=\"7\">\n       <Box pb=\"10\" pt=\"81\" justifyContent=\"center\" alignItems=\"center\" >\n         <Heading fontSize=\"2xl\">\n              Sign up to get started\n         </Heading>\n        </Box>\n\n        <Box justifyContent=\"center\" alignItems=\"center\">\n          <Pressable  _pressed={{opacity: 0.5}} onPress={pickImage}>\n            <Avatar w=\"100\" h=\"100\" pb=\"1\"\n            source={{uri: profilePhoto}}\n            >\n            </Avatar> \n          </Pressable> \n        </Box>\n\n        <VStack space={3} mt=\"5\">\n          <FormControl isInvalid={ValidUsername}>\n            <FormControl.Label>Name</FormControl.Label>\n            <Input \n              autocorrect={false} \n              onChangeText={(username) => setUsername(username.trim())}\n              value={username}/>\n          </FormControl>\n\n          <FormControl isInvalid={ValidEmail}>\n            <FormControl.Label>Email</FormControl.Label>\n            <Input              \n              autoCapitalize=\"none\" \n              autocorrect={false} \n              keyboardType=\"email-address\"\n              onChangeText={(email) => setEmail(email.trim())}\n              value={email}\n            />\n            <FormControl.ErrorMessage leftIcon={<WarningOutlineIcon size=\"xs\" />}>\n              E-mail is already taken\n            </FormControl.ErrorMessage>\n          </FormControl>\n\n          <FormControl isRequired isInvalid={ValidPassword}>\n            <FormControl.Label>Password</FormControl.Label>\n            <Input \n              type=\"password\"       \n              autoCapitalize=\"none\" \n              autocorrect={false} \n              secureTextEntry={true}\n              onChangeText={(password) => setPassword(password.trim())}\n              value={password}/>\n            <FormControl.HelperText>\n              Must be atleast 6 characters.\n            </FormControl.HelperText>\n\n            <FormControl.ErrorMessage leftIcon={<WarningOutlineIcon size=\"xs\" />}>\n              Atleast 6 characters are required.\n            </FormControl.ErrorMessage>\n          </FormControl>\n          <Button mt=\"2\"  onPress={signUp}>\n            Sign up\n          </Button>\n\n          <HStack mt=\"2\" justifyContent=\"center\">\n            <Text fontSize=\"sm\"  >\n              Already a user?{\" \"}\n            </Text>\n            <Link onPress={() => navigation.push(\"LogInScreen\")} _text={{\n              color: \"#88d498\",\n              fontWeight: \"medium\",\n              fontSize: \"sm\"\n            }} href=\"#\">\n              Sign Up\n            </Link>\n          </HStack>\n          \n        </VStack>\n     </Box>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}