{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"children\",\"isDisabled\",\"onPress\",\"textValue\"],_excluded2=[\"_text\"];function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import React,{forwardRef,memo}from'react';import Text from\"../../primitives/Text\";import{usePropsResolution}from\"../../../hooks/useThemeProps\";import{Pressable}from\"../../primitives/Pressable\";import{MenuContext}from\"./MenuContext\";import{useMenuItem}from\"./useMenu\";import{mergeRefs}from\"../../../utils\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";var MenuItem=function MenuItem(_ref,ref){var children=_ref.children,isDisabled=_ref.isDisabled,_onPress=_ref.onPress,textValue=_ref.textValue,props=_objectWithoutProperties(_ref,_excluded);var _React$useContext=React.useContext(MenuContext),closeOnSelect=_React$useContext.closeOnSelect,onClose=_React$useContext.onClose;var menuItemRef=React.useRef(null);var mergedRef=mergeRefs([menuItemRef,ref]);var _usePropsResolution=usePropsResolution('MenuItem',props,{isDisabled:isDisabled},{cascadePseudoProps:true}),_text=_usePropsResolution._text,resolvedProps=_objectWithoutProperties(_usePropsResolution,_excluded2);var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),textContent=_React$useState2[0],setTextContent=_React$useState2[1];React.useEffect(function(){var menuItem=menuItemRef.current;if(menuItem){var _menuItem$textContent;setTextContent(((_menuItem$textContent=menuItem.textContent)!==null&&_menuItem$textContent!==void 0?_menuItem$textContent:'').trim());}},[children]);var menuItemProps=useMenuItem({textValue:textValue!==null&&textValue!==void 0?textValue:textContent,ref:menuItemRef});if(useHasResponsiveProps(props)){return null;}return React.createElement(Pressable,_extends({},menuItemProps,resolvedProps,{ref:mergedRef,disabled:isDisabled,accessibilityState:{disabled:isDisabled},onPress:function onPress(e){if(!isDisabled){_onPress&&_onPress(e);if(closeOnSelect){onClose&&onClose();}}}}),React.createElement(React.Fragment,null,React.Children.map(children,function(child,index){if(typeof child==='string'||typeof child==='number'){return React.createElement(Text,_extends({},_text,{key:\"menu-item-\".concat(index)}),child);}else{return child;}})));};export default memo(forwardRef(MenuItem));","map":{"version":3,"mappings":"ggBAAA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,IAA5B,KAAwC,OAAxC,CACA,MAAOC,KAAP,6BACA,OAASC,kBAAT,oCACA,OAASC,SAAT,kCAEA,OAASC,WAAT,qBACA,OAASC,WAAT,iBACA,OAASC,SAAT,sBACA,OAASC,qBAAT,4CAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,MAEfC,GAFe,CAGZ,IAFDC,SAEC,MAFDA,QAEC,CAFSC,UAET,MAFSA,UAET,CAFqBC,QAErB,MAFqBA,OAErB,CAF8BC,SAE9B,MAF8BA,SAE9B,CAF4CC,KAE5C,0CACH,sBAAmChB,KAAK,CAACiB,UAANjB,CAAiBM,WAAjBN,CAAnC,CAAQkB,aAAR,mBAAQA,aAAR,CAAuBC,OAAvB,mBAAuBA,OAAvB,CACA,GAAMC,YAAW,CAAGpB,KAAK,CAACqB,MAANrB,CAAkB,IAAlBA,CAApB,CACA,GAAMsB,UAAS,CAAGd,SAAS,CAAC,CAACY,WAAD,CAAcT,GAAd,CAAD,CAA3B,CACA,wBAAoCP,kBAAkB,CACpD,UADoD,CAEpDY,KAFoD,CAGpD,CACEH,qBADF,CAHoD,CAMpD,CACEU,kBAAkB,CAAE,IADtB,CANoD,CAAtD,CAAQC,KAAR,qBAAQA,KAAR,CAAkBC,aAAlB,0DAUA,oBAAsCzB,KAAK,CAAC0B,QAAN1B,CAAe,EAAfA,CAAtC,oDAAO2B,WAAP,qBAAoBC,cAApB,qBACA5B,KAAK,CAAC6B,SAAN7B,CAAgB,UAAM,CACpB,GAAM8B,SAAQ,CAAGV,WAAW,CAACW,OAA7B,CACA,GAAID,QAAJ,CAAc,2BACZF,cAAc,CAAC,wBAACE,QAAQ,CAACH,WAAV,+DAAyB,EAAzB,EAA6BK,IAA7B,EAAD,CAAdJ,CACD,CAJH,EAKG,CAAChB,QAAD,CALHZ,EAOA,GAAMiC,cAAa,CAAG1B,WAAW,CAAC,CAChCQ,SAAS,CAAEA,SAAF,OAAEA,WAAF,SAAEA,WAAaY,WADQ,CAEhChB,GAAG,CAAES,WAF2B,CAAD,CAAjC,CAMA,GAAIX,qBAAqB,CAACO,KAAD,CAAzB,CAAkC,CAChC,MAAO,KAAP,CACD,CACD,MACEhB,qBAACK,SAAD,aACM4B,aADN,CAEMR,aAFN,EAGEd,GAAG,CAAEW,SAHP,CAIEY,QAAQ,CAAErB,UAJZ,CAKEsB,kBAAkB,CAAE,CAClBD,QAAQ,CAAErB,UADQ,CALtB,CAQEC,OAAO,CAAGsB,kBAAD,CAAY,CACnB,GAAI,CAACvB,UAAL,CAAiB,CACfC,QAAO,EAAIA,QAAO,CAACsB,CAAD,CAAlBtB,CACA,GAAII,aAAJ,CAAmB,CACjBC,OAAO,EAAIA,OAAO,EAAlBA,CACD,CACF,CACF,CAfH,GAiBEnB,wCACGA,KAAK,CAACqC,QAANrC,CAAesC,GAAftC,CAAmBY,QAAnBZ,CAA6B,SAACuC,KAAD,CAAQC,KAAR,CAAuB,CACnD,GAAI,MAAOD,MAAP,GAAiB,QAAjB,EAA6B,MAAOA,MAAP,GAAiB,QAAlD,CAA4D,CAC1D,MACEvC,qBAACG,IAAD,aAAUqB,KAAV,EAAiBiB,GAAG,qBAAeD,KAAf,CAApB,GACGD,KADH,CADF,CADF,KAMO,CACL,MAAOA,MAAP,CACD,CATF,EADH,CAjBF,CADF,CAlCF,EAqEA,cAAerC,KAAI,CAACD,UAAU,CAACS,QAAD,CAAX,CAAnB","names":["React","forwardRef","memo","Text","usePropsResolution","Pressable","MenuContext","useMenuItem","mergeRefs","useHasResponsiveProps","MenuItem","ref","children","isDisabled","onPress","textValue","props","useContext","closeOnSelect","onClose","menuItemRef","useRef","mergedRef","cascadePseudoProps","_text","resolvedProps","useState","textContent","setTextContent","useEffect","menuItem","current","trim","menuItemProps","disabled","accessibilityState","e","Children","map","child","index","key"],"sources":["MenuItem.tsx"],"sourcesContent":["import React, { forwardRef, memo } from 'react';\nimport Text from '../../primitives/Text';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport { Pressable } from '../../primitives/Pressable';\nimport type { IMenuItemProps } from './types';\nimport { MenuContext } from './MenuContext';\nimport { useMenuItem } from './useMenu';\nimport { mergeRefs } from '../../../utils';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst MenuItem = (\n  { children, isDisabled, onPress, textValue, ...props }: IMenuItemProps,\n  ref: any\n) => {\n  const { closeOnSelect, onClose } = React.useContext(MenuContext);\n  const menuItemRef = React.useRef<any>(null);\n  const mergedRef = mergeRefs([menuItemRef, ref]);\n  const { _text, ...resolvedProps } = usePropsResolution(\n    'MenuItem',\n    props,\n    {\n      isDisabled,\n    },\n    {\n      cascadePseudoProps: true,\n    }\n  );\n  const [textContent, setTextContent] = React.useState('');\n  React.useEffect(() => {\n    const menuItem = menuItemRef.current;\n    if (menuItem) {\n      setTextContent((menuItem.textContent ?? '').trim());\n    }\n  }, [children]);\n\n  const menuItemProps = useMenuItem({\n    textValue: textValue ?? textContent,\n    ref: menuItemRef,\n  });\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n  return (\n    <Pressable\n      {...menuItemProps}\n      {...resolvedProps}\n      ref={mergedRef}\n      disabled={isDisabled}\n      accessibilityState={{\n        disabled: isDisabled,\n      }}\n      onPress={(e: any) => {\n        if (!isDisabled) {\n          onPress && onPress(e);\n          if (closeOnSelect) {\n            onClose && onClose();\n          }\n        }\n      }}\n    >\n      <>\n        {React.Children.map(children, (child, index: any) => {\n          if (typeof child === 'string' || typeof child === 'number') {\n            return (\n              <Text {..._text} key={`menu-item-${index}`}>\n                {child}\n              </Text>\n            );\n          } else {\n            return child;\n          }\n        })}\n      </>\n    </Pressable>\n  );\n};\n\nexport default memo(forwardRef(MenuItem));\n"]},"metadata":{},"sourceType":"module"}