{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport styled from \"styled-components/native\";\nimport Text from \"../../components/Text.js\";\nimport { Entypo, Ionicons } from \"@expo/vector-icons\";\nimport { FirebaseContext } from \"../../context/FirebaseContext\";\nimport { UserContext } from \"../../context/UserContext\";\nimport { GroupContext } from \"../../context/GroupContext\";\nimport { FontAwesome } from '@expo/vector-icons';\nimport { Timestamp } from \"firebase/firestore\";\nimport { Flex, Box, Pressable, Heading, IconButton, Icon, HStack, Avatar, VStack, Spacer, Center, Image, Divider, Stack, Button } from \"native-base\";\nimport * as Haptics from 'expo-haptics';\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default FeedScreen = function FeedScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(GroupContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      group = _useContext2[0],\n      setGroup = _useContext2[1];\n\n  var firebase = useContext(FirebaseContext);\n\n  var _useContext3 = useContext(UserContext),\n      _useContext4 = _slicedToArray(_useContext3, 2),\n      user = _useContext4[0],\n      setUser = _useContext4[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      post = _useState2[0],\n      setPost = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      text = _useState4[0],\n      setText = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      feed = _useState6[0],\n      setfeed = _useState6[1];\n\n  var _useState7 = useState(\"recent\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      sortsetting = _useState8[0],\n      setsortsetting = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      refreshing = _useState10[0],\n      setRefreshing = _useState10[1];\n\n  var data = [{\n    id: \"1223434\",\n    user: {\n      username: \"Synnøve\",\n      profilePhotoUrl: \"https://picsum.photos/96/96\"\n    },\n    postedAt: Timestamp,\n    post: \"Hei Håvard\",\n    photoUrl: \"https://picsum.photos/200/300\",\n    Upvotes: 21,\n    Downvotes: 3\n  }, {\n    id: \"12234134\",\n    user: {\n      username: \"Synnøve\",\n      profilePhotoUrl: \"https://picsum.photos/96/96\"\n    },\n    postedAt: Timestamp,\n    post: \"Hei Håvard\",\n    photoUrl: \"https://picsum.photos/200/300\",\n    Upvotes: 21,\n    Downvotes: 3\n  }, {\n    id: \"12234341\",\n    user: {\n      username: \"Synnøve\",\n      profilePhotoUrl: \"https://picsum.photos/96/96\"\n    },\n    postedAt: Timestamp,\n    post: \"Hei Håvard\",\n    photoUrl: \"https://picsum.photos/200/300\",\n    Upvotes: 21,\n    Downvotes: 3\n  }];\n  useEffect(function () {\n    FirstRefresh();\n  }, []);\n\n  var FirstRefresh = function FirstRefresh() {\n    var RetrivedFeed;\n    return _regeneratorRuntime.async(function FirstRefresh$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(firebase.RetriveFeed(sortsetting));\n\n          case 3:\n            RetrivedFeed = _context.sent;\n            setfeed(RetrivedFeed);\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(\"Something went wrong @RetriveFeed\");\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var RetriveFeed = function RetriveFeed() {\n    var RetrivedFeed;\n    return _regeneratorRuntime.async(function RetriveFeed$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(firebase.RetriveFeed(sortsetting));\n\n          case 4:\n            RetrivedFeed = _context2.sent;\n            console.log(RetrivedFeed);\n            setfeed(RetrivedFeed);\n            _context2.next = 12;\n            break;\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(\"Something went wrong @RetriveFeed\");\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  var makeid = function makeid(length) {\n    var result = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var charactersLength = characters.length;\n\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n\n    return result;\n  };\n\n  var sett = function sett() {\n    return _regeneratorRuntime.async(function sett$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setPost({\n              id: makeid(10),\n              user: {\n                uid: user.uid,\n                username: user.username\n              },\n              avatar: {\n                uri: user.profilePhotoUrl\n              },\n              postedAt: new Date(),\n              post: text,\n              Upvotes: 0,\n              Downvotes: 0\n            });\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var SendPost = function SendPost() {\n    return _regeneratorRuntime.async(function SendPost$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(sett());\n\n          case 2:\n            _context4.prev = 2;\n            _context4.next = 5;\n            return _regeneratorRuntime.awrap(firebase.AddPost(post, group.groupID));\n\n          case 5:\n            _context4.next = 10;\n            break;\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](2);\n            console.log(\"Error @SendPost\", _context4.t0);\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[2, 7]], Promise);\n  };\n\n  var renderPost = function renderPost(_ref2) {\n    var item = _ref2.item;\n    return _jsxs(PostContainer, {\n      children: [_jsxs(PostHeaderContainer, {\n        children: [_jsx(PostProfilePhoto, {\n          source: {\n            uri: item.user.profilePhotoUrl\n          }\n        }), _jsxs(PostInfoContainer, {\n          children: [_jsx(Text, {\n            medium: true,\n            children: item.user.username\n          }), _jsx(Text, {\n            tiny: true,\n            color: \"#c1c3cc\",\n            margin: \"4px 0 0 0\",\n            children: item.user.postedAt\n          })]\n        }), _jsx(Options, {\n          children: _jsx(Entypo, {\n            name: \"dots-three-horizontal\",\n            size: 16,\n            color: \"#73788b\"\n          })\n        })]\n      }), _jsxs(Post, {\n        children: [_jsx(Text, {\n          children: item.post\n        }), _jsx(PostPhoto, {\n          source: {\n            uri: item.photoUrl\n          }\n        }), _jsxs(PostDetails, {\n          children: [_jsxs(PostLikes, {\n            children: [_jsx(Ionicons, {\n              name: \"ios-arrow-up-circle-outline\",\n              size: 24,\n              color: \"#73788b\"\n            }), _jsx(Text, {\n              tiny: true,\n              margin: \"0 0 0 8px\",\n              children: item.likes\n            })]\n          }), _jsxs(PostComments, {\n            children: [_jsx(Ionicons, {\n              name: \"ios-chatbox-ellipses-outline\",\n              size: 24,\n              color: \"#73788b\"\n            }), _jsx(Text, {\n              tiny: true,\n              margin: \"0 0 0 8px\",\n              children: item.comments\n            })]\n          })]\n        })]\n      })]\n    });\n  };\n\n  return _jsxs(Container, {\n    children: [_jsx(FeedContainer, {\n      children: _jsx(Feed, {\n        data: data,\n        renderItem: renderPost,\n        keyExtractor: function keyExtractor(item) {\n          return item.id.toString();\n        },\n        refreshControl: _jsx(RefreshControl, {\n          refreshing: refreshing,\n          onRefresh: RetriveFeed\n        })\n      })\n    }), _jsx(StatusBar, {\n      barStyle: \"dark-content\"\n    })]\n  });\n};\nvar Container = styled.View(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n  flex: 1; \\n  background-color: #ebecf3;\\n  padding-top: 15px; \\n\"])));\nvar FeedContainer = styled.View(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n\\n\"])));\nvar Feed = styled.FlatList(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"\\n\\n\"])));\nvar StatusBar = styled.StatusBar(_templateObject4 || (_templateObject4 = _taggedTemplateLiteralLoose([\" \\n\\n\"])));\nvar PostContainer = styled.View(_templateObject5 || (_templateObject5 = _taggedTemplateLiteralLoose([\"\\n  margin: 16px 16px 0 16px; \\n  background-color: #ffffff;\\n  border-radius: 6px; \\n  padding: 8px; \\n\"])));\nvar PostHeaderContainer = styled.View(_templateObject6 || (_templateObject6 = _taggedTemplateLiteralLoose([\"\\n  flex-direction: row; \\n  align-items: center; \\n\"])));\nvar PostInfoContainer = styled.View(_templateObject7 || (_templateObject7 = _taggedTemplateLiteralLoose([\"\\n  flex: 1; \\n  margin: 0 16px; \\n\"])));\nvar PostProfilePhoto = styled.Image(_templateObject8 || (_templateObject8 = _taggedTemplateLiteralLoose([\"\\n  width: 48px; \\n  height: 48px; \\n  border-radius: 24px; \\n\"])));\nvar PostPhoto = styled.Image(_templateObject9 || (_templateObject9 = _taggedTemplateLiteralLoose([\"\\n  width: 100%; \\n  height: 150px; \\n  border-radius: 6px; \\n\"])));\nvar PostDetails = styled.View(_templateObject10 || (_templateObject10 = _taggedTemplateLiteralLoose([\"\\n  flex-direction: row; \\n  margin-top: 8px; \\n\"])));\nvar Options = styled.View(_templateObject11 || (_templateObject11 = _taggedTemplateLiteralLoose([\"\\n\\n\"])));\nvar Post = styled.View(_templateObject12 || (_templateObject12 = _taggedTemplateLiteralLoose([\"\\n  margin-left: 64px; \\n\"])));\nvar PostComments = styled.View(_templateObject13 || (_templateObject13 = _taggedTemplateLiteralLoose([\"\\n  flex-direction: row; \\n  align-items: center; \\n  margin-left: 16px; \\n\\n\"])));\nvar PostLikes = styled.View(_templateObject14 || (_templateObject14 = _taggedTemplateLiteralLoose([\"\\n  flex-direction: row; \\n  align-items: center; \\n\"])));","map":{"version":3,"sources":["/Users/havardskjaerstein/Desktop/Achive/screens/FeedTab/FeedScreen.js"],"names":["React","useState","useContext","useEffect","styled","Text","Entypo","Ionicons","FirebaseContext","UserContext","GroupContext","FontAwesome","Timestamp","Flex","Box","Pressable","Heading","IconButton","Icon","HStack","Avatar","VStack","Spacer","Center","Image","Divider","Stack","Button","Haptics","FeedScreen","navigation","group","setGroup","firebase","user","setUser","post","setPost","text","setText","feed","setfeed","sortsetting","setsortsetting","refreshing","setRefreshing","data","id","username","profilePhotoUrl","postedAt","photoUrl","Upvotes","Downvotes","FirstRefresh","RetriveFeed","RetrivedFeed","console","log","notificationAsync","NotificationFeedbackType","Success","makeid","length","result","characters","charactersLength","i","charAt","Math","floor","random","sett","uid","avatar","uri","Date","SendPost","AddPost","groupID","renderPost","item","likes","comments","toString","Container","View","FeedContainer","Feed","FlatList","StatusBar","PostContainer","PostHeaderContainer","PostInfoContainer","PostProfilePhoto","PostPhoto","PostDetails","Options","Post","PostComments","PostLikes"],"mappings":"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","sourcesContent":["import React, {useState, useContext, useEffect} from \"react\";\nimport styled from \"styled-components/native\"; \nimport Text from \"../../components/Text.js\";\nimport {Entypo, Ionicons} from \"@expo/vector-icons\"; \nimport {FirebaseContext} from \"../../context/FirebaseContext\";\nimport {UserContext} from \"../../context/UserContext\";\nimport {GroupContext} from \"../../context/GroupContext\";\nimport { FontAwesome } from '@expo/vector-icons'\nimport { Timestamp } from \"firebase/firestore\";\nimport {Flex,Box, Pressable, Heading, IconButton, Icon, HStack, Avatar, VStack, Spacer, Center, Image,Divider,Stack, Button} from \"native-base\";\n\nimport * as Haptics from 'expo-haptics';\nimport {RefreshControl} from 'react-native';\n\nexport default FeedScreen = ({navigation}) => {\n\n  const [group, setGroup] = useContext(GroupContext); \n  const firebase = useContext(FirebaseContext); \n  const [user, setUser] = useContext(UserContext); \n  const [post, setPost] = useState([])\n  const [text, setText] = useState(\"\")\n  const [feed, setfeed] = useState([]); \n  const [sortsetting, setsortsetting] = useState(\"recent\"); \n  const [refreshing, setRefreshing] = useState(false);\n\n  const data = [\n    {\n      id: \"1223434\",\n      user: {\n        username: \"Synnøve\", \n        profilePhotoUrl: \"https://picsum.photos/96/96\"\n      },\n      postedAt: Timestamp,\n      post: \"Hei Håvard\",\n      photoUrl: \"https://picsum.photos/200/300\",\n      Upvotes: 21,\n      Downvotes: 3\n    },\n    {\n      id: \"12234134\",\n      user: {\n        username: \"Synnøve\", \n        profilePhotoUrl: \"https://picsum.photos/96/96\"\n      },\n      postedAt: Timestamp,\n      post: \"Hei Håvard\",\n      photoUrl: \"https://picsum.photos/200/300\",\n      Upvotes: 21,\n      Downvotes: 3\n    },\n    {\n      id: \"12234341\",\n      user: {\n        username: \"Synnøve\", \n        profilePhotoUrl: \"https://picsum.photos/96/96\"\n      },\n      postedAt: Timestamp,\n      post: \"Hei Håvard\",\n      photoUrl: \"https://picsum.photos/200/300\",\n      Upvotes: 21,\n      Downvotes: 3\n    },\n  ]\nuseEffect(() => {\n  FirstRefresh(); \n}, []);\n\n\nconst FirstRefresh = async () => {\n  try{\n    const RetrivedFeed = await firebase.RetriveFeed(sortsetting); \n\n    setfeed(RetrivedFeed); \n\n  }catch {\n    console.log(\"Something went wrong @RetriveFeed\"); \n  }\n};\n\n//fetch the latest feed for \nconst RetriveFeed = async () => {\n  try{\n    Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success)\n    const RetrivedFeed = await firebase.RetriveFeed(sortsetting); \n    console.log(RetrivedFeed); \n\n    setfeed(RetrivedFeed); \n\n  }catch {\n    console.log(\"Something went wrong @RetriveFeed\"); \n  }\n};\n\nconst makeid = length => {\n  var result           = '';\n  var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n  for ( var i = 0; i < length; i++ ) {\n    result += characters.charAt(Math.floor(Math.random() * \n    charactersLength));\n }\n  return result;\n}\n\n//fetch the latest feed for \n\nconst sett = async () => {\n  setPost(\n    {\n      id: makeid(10), \n      user: {\n        uid: user.uid,\n        username: user.username, \n      }, \n      avatar:{uri: user.profilePhotoUrl},\n      postedAt: new Date(),\n      post: text,   \n      Upvotes: 0, \n      Downvotes: 0, \n    }); \n}\n\n//Ha en max lengde på posten. \nconst SendPost = async () => {\n\n  await sett(); \n  try{\n    await firebase.AddPost(post, group.groupID)\n  }catch(error){\n    console.log(\"Error @SendPost\", error)\n  }\n};\n\n  const renderPost = ({item}) =>(\n    <PostContainer>\n\n      <PostHeaderContainer> \n        <PostProfilePhoto  source={{uri: item.user.profilePhotoUrl}}/>\n\n        <PostInfoContainer>\n          <Text medium>{item.user.username}</Text>\n          <Text tiny color=\"#c1c3cc\" margin=\"4px 0 0 0\">\n            {item.user.postedAt}\n          </Text>\n        </PostInfoContainer>\n\n      <Options>\n        <Entypo name=\"dots-three-horizontal\" size={16} color=\"#73788b\" />\n      </Options>\n\n      </PostHeaderContainer>\n      <Post>\n        <Text>{item.post}</Text>\n        <PostPhoto source={{uri: item.photoUrl}} /> \n        <PostDetails>\n\n          <PostLikes>\n            <Ionicons name =\"ios-arrow-up-circle-outline\" size={24} color=\"#73788b\"/>\n            <Text tiny margin=\"0 0 0 8px\">\n              {item.likes}\n            </Text>\n          </PostLikes>\n\n          <PostComments>\n            <Ionicons name =\"ios-chatbox-ellipses-outline\" size={24} color=\"#73788b\"/>\n            <Text tiny margin= \"0 0 0 8px\">\n             {item.comments}\n            </Text>\n          </PostComments>\n\n        </PostDetails>\n      </Post>\n    </PostContainer>\n  )\n\n  return(\n    <Container>\n      <FeedContainer>\n        <Feed \n          data={data} \n          renderItem={renderPost} \n          keyExtractor={item => item.id.toString()} \n          refreshControl={<RefreshControl refreshing={refreshing} onRefresh={RetriveFeed} />}\n        />\n      </FeedContainer>\n    <StatusBar barStyle=\"dark-content\" />\n    </Container>\n  );\n}\n\nconst Container = styled.View`\n  flex: 1; \n  background-color: #ebecf3;\n  padding-top: 15px; \n`;\n\nconst FeedContainer = styled.View`\n\n`;\n\nconst Feed = styled.FlatList`\n\n`;\n\nconst StatusBar = styled.StatusBar` \n\n`;\nconst PostContainer = styled.View`\n  margin: 16px 16px 0 16px; \n  background-color: #ffffff;\n  border-radius: 6px; \n  padding: 8px; \n`;\n\nconst PostHeaderContainer = styled.View`\n  flex-direction: row; \n  align-items: center; \n`;\n\nconst PostInfoContainer = styled.View`\n  flex: 1; \n  margin: 0 16px; \n`;\n\nconst PostProfilePhoto = styled.Image`\n  width: 48px; \n  height: 48px; \n  border-radius: 24px; \n`;\n\nconst PostPhoto = styled.Image`\n  width: 100%; \n  height: 150px; \n  border-radius: 6px; \n`;\n\nconst PostDetails = styled.View`\n  flex-direction: row; \n  margin-top: 8px; \n`;\n\nconst Options = styled.View`\n\n`;\n\nconst Post = styled.View`\n  margin-left: 64px; \n`; \n\nconst PostComments = styled.View`\n  flex-direction: row; \n  align-items: center; \n  margin-left: 16px; \n\n`; \n\nconst PostLikes = styled.View`\n  flex-direction: row; \n  align-items: center; \n`; \n\n"]},"metadata":{},"sourceType":"module"}