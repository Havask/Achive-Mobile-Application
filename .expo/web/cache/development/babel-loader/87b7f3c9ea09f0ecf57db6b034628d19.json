{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { createContext, useState, useEffect, useLayoutEffect, useCallback } from \"react\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, deleteUser, sendPasswordResetEmail, signOut, updatePassword, updateEmail, FacebookAuthProvider, getRedirectResult, signInWithRedirect } from \"firebase/auth\";\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { getFirestore, setDoc, doc, updateDoc, getDoc, addDoc, orderBy, query, onSnapshot, collection, arrayUnion, arrayRemove, limit, getDocs, where } from \"firebase/firestore\";\nimport config from \"../config/Firebase\";\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport * as SecureStore from 'expo-secure-store';\nimport { getDatabase } from \"firebase/database\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar app = initializeApp(config);\nvar storage = getStorage(app);\nvar auth = getAuth(app);\nvar db = getFirestore(app);\nvar FirebaseContext = createContext();\nvar database = getDatabase(app);\nvar Firebase = {\n  CacheUserContext: function CacheUserContext(user) {\n    var jsonValue;\n    return _regeneratorRuntime.async(function CacheUserContext$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            jsonValue = JSON.stringify(user);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"User\", jsonValue));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  CacheGroupData: function CacheGroupData() {\n    var groups, objectArray, jsonValue;\n    return _regeneratorRuntime.async(function CacheGroupData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Firebase.RetriveGroupData());\n\n          case 2:\n            groups = _context2.sent;\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(Firebase.LoadGroups(groups));\n\n          case 5:\n            objectArray = _context2.sent;\n            jsonValue = JSON.stringify(objectArray);\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"groups\", jsonValue));\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  RemoveCacheGroupData: function RemoveCacheGroupData(groupID) {\n    var value, parsedJson, indexOfObject, jsonValue;\n    return _regeneratorRuntime.async(function RemoveCacheGroupData$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"groups\"));\n\n          case 2:\n            value = _context3.sent;\n\n            if (!(value !== null)) {\n              _context3.next = 19;\n              break;\n            }\n\n            parsedJson = JSON.parse(value);\n            console.log(parsedJson);\n            indexOfObject = parsedJson.findIndex(function (object) {\n              return object.groupID === groupID;\n            });\n            parsedJson.splice(indexOfObject, 1);\n            console.log(parsedJson);\n\n            if (!(parsedJson.length === 0)) {\n              _context3.next = 13;\n              break;\n            }\n\n            console.log(\"Array is empty!\");\n            AsyncStorage.removeItem(\"groups\");\n            return _context3.abrupt(\"return\", 1);\n\n          case 13:\n            jsonValue = JSON.stringify(parsedJson);\n            _context3.next = 16;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"groups\", jsonValue));\n\n          case 16:\n            return _context3.abrupt(\"return\", parsedJson);\n\n          case 19:\n            console.log(\" no groups to remove in persistent storage\");\n\n          case 20:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  ClearCacheGroupData: function ClearCacheGroupData() {\n    var value;\n    return _regeneratorRuntime.async(function ClearCacheGroupData$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"groups\"));\n\n          case 2:\n            value = _context4.sent;\n\n            if (value !== null) {\n              AsyncStorage.removeItem(\"groups\");\n            } else {\n              console.log(\" no groups to remove in persistent storage\");\n            }\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  ValidateSignUpForm: function ValidateSignUpForm(email, password) {\n    var UserRef, q;\n    return _regeneratorRuntime.async(function ValidateSignUpForm$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            UserRef = collection(db, \"user\");\n            q = query(UserRef, where(\"email\", \"==\", email));\n\n            if (!(q != null)) {\n              _context5.next = 5;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", 2);\n\n          case 5:\n            if (!(password.length < 6)) {\n              _context5.next = 7;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", 1);\n\n          case 7:\n            return _context5.abrupt(\"return\");\n\n          case 10:\n            _context5.prev = 10;\n            _context5.t0 = _context5[\"catch\"](0);\n            console.log(\"Error @ValidateSignUpForm:\", _context5.t0.message);\n\n          case 13:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  },\n  getCurrentUser: function getCurrentUser() {\n    return auth.currentUser;\n  },\n  createUser: function createUser(user) {\n    var _uid, _profilePhotoUrl;\n\n    return _regeneratorRuntime.async(function createUser$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            _context6.next = 3;\n            return _regeneratorRuntime.awrap(createUserWithEmailAndPassword(auth, user.email, user.password));\n\n          case 3:\n            _uid = Firebase.getCurrentUser().uid;\n            _profilePhotoUrl = \"default\";\n            console.log(\"Sets the docs to database\");\n            _context6.next = 8;\n            return _regeneratorRuntime.awrap(setDoc(doc(db, \"users\", _uid), {\n              username: user.username,\n              email: user.email,\n              password: user.password,\n              profilePhotoUrl: _profilePhotoUrl,\n              groups: []\n            }));\n\n          case 8:\n            if (!user.profilePhoto) {\n              _context6.next = 12;\n              break;\n            }\n\n            _context6.next = 11;\n            return _regeneratorRuntime.awrap(Firebase.uploadProfilePhoto(user.profilePhoto));\n\n          case 11:\n            _profilePhotoUrl = _context6.sent;\n\n          case 12:\n            delete user.password;\n            return _context6.abrupt(\"return\", _objectSpread(_objectSpread({}, user), {}, {\n              profilePhotoUrl: _profilePhotoUrl,\n              uid: _uid\n            }));\n\n          case 16:\n            _context6.prev = 16;\n            _context6.t0 = _context6[\"catch\"](0);\n            console.log(\"Error @createUser:\", _context6.t0.message);\n\n          case 19:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, [[0, 16]], Promise);\n  },\n  uploadProfilePhoto: function uploadProfilePhoto(uri) {\n    var uid, photo, imagesRef, uidRef, url, docRef;\n    return _regeneratorRuntime.async(function uploadProfilePhoto$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            uid = Firebase.getCurrentUser().uid;\n            _context7.prev = 1;\n            _context7.next = 4;\n            return _regeneratorRuntime.awrap(Firebase.getBlob(uri));\n\n          case 4:\n            photo = _context7.sent;\n            imagesRef = ref(storage, 'profilePhotos');\n            uidRef = ref(imagesRef, uid);\n            _context7.next = 9;\n            return _regeneratorRuntime.awrap(uploadBytes(uidRef, photo));\n\n          case 9:\n            _context7.next = 11;\n            return _regeneratorRuntime.awrap(getDownloadURL(ref(storage, uidRef)));\n\n          case 11:\n            url = _context7.sent;\n            docRef = doc(db, \"users\", uid);\n            _context7.next = 15;\n            return _regeneratorRuntime.awrap(updateDoc(docRef, {\n              profilePhotoUrl: url\n            }));\n\n          case 15:\n            return _context7.abrupt(\"return\", url);\n\n          case 18:\n            _context7.prev = 18;\n            _context7.t0 = _context7[\"catch\"](1);\n            console.log(\"Error @uploadProfilePhoto\", _context7.t0);\n\n          case 21:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, [[1, 18]], Promise);\n  },\n  uploadGroupPhoto: function uploadGroupPhoto(uri, GroupID) {\n    var photo, imagesRef, uidRef, url, _GroupRef;\n\n    return _regeneratorRuntime.async(function uploadGroupPhoto$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.prev = 0;\n            console.log(\"1\");\n            _context8.next = 4;\n            return _regeneratorRuntime.awrap(Firebase.getBlob(uri));\n\n          case 4:\n            photo = _context8.sent;\n            imagesRef = ref(storage, 'GroupPhotos');\n            uidRef = ref(imagesRef, GroupID);\n            _context8.next = 9;\n            return _regeneratorRuntime.awrap(uploadBytes(uidRef, photo));\n\n          case 9:\n            console.log(\"2\");\n            _context8.next = 12;\n            return _regeneratorRuntime.awrap(getDownloadURL(ref(storage, uidRef)));\n\n          case 12:\n            url = _context8.sent;\n            _GroupRef = doc(db, \"groups\", GroupID);\n            _context8.next = 16;\n            return _regeneratorRuntime.awrap(updateDoc(_GroupRef, {\n              GroupPhotoUrl: url\n            }));\n\n          case 16:\n            console.log(\"3\");\n            return _context8.abrupt(\"return\", url);\n\n          case 20:\n            _context8.prev = 20;\n            _context8.t0 = _context8[\"catch\"](0);\n            console.log(\"Error @uploadGroupPhoto\", _context8.t0);\n\n          case 23:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, null, null, [[0, 20]], Promise);\n  },\n  getBlob: function getBlob(uri) {\n    return _regeneratorRuntime.async(function getBlob$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n              var xhr = new XMLHttpRequest();\n\n              xhr.onload = function () {\n                resolve(xhr.response);\n              };\n\n              xhr.onerror = function () {\n                reject(new TypeError(\"Network request failed\"));\n              };\n\n              xhr.responseType = \"blob\";\n              xhr.open(\"GET\", uri, true);\n              xhr.send(null);\n            }));\n\n          case 2:\n            return _context9.abrupt(\"return\", _context9.sent);\n\n          case 3:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  getUserInfo: function getUserInfo(uid) {\n    var docRef, _user;\n\n    return _regeneratorRuntime.async(function getUserInfo$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            _context10.prev = 0;\n            docRef = doc(db, \"users\", uid);\n            _context10.next = 4;\n            return _regeneratorRuntime.awrap(getDoc(docRef));\n\n          case 4:\n            _user = _context10.sent;\n\n            if (!_user.exists()) {\n              _context10.next = 9;\n              break;\n            }\n\n            return _context10.abrupt(\"return\", _user.data());\n\n          case 9:\n            console.log(\"Can't get document @getUserInfo!\");\n\n          case 10:\n            _context10.next = 15;\n            break;\n\n          case 12:\n            _context10.prev = 12;\n            _context10.t0 = _context10[\"catch\"](0);\n            console.log(\"error @getUserInfo\", _context10.t0);\n\n          case 15:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, null, null, [[0, 12]], Promise);\n  },\n  SignOutUser: function SignOutUser() {\n    return _regeneratorRuntime.async(function SignOutUser$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.prev = 0;\n            _context11.next = 3;\n            return _regeneratorRuntime.awrap(SecureStore.deleteItemAsync(\"User\"));\n\n          case 3:\n            _context11.next = 5;\n            return _regeneratorRuntime.awrap(signOut(auth));\n\n          case 5:\n            return _context11.abrupt(\"return\", true);\n\n          case 8:\n            _context11.prev = 8;\n            _context11.t0 = _context11[\"catch\"](0);\n            console.log(\"Error @SignOutUser\", _context11.t0);\n\n          case 11:\n            return _context11.abrupt(\"return\", false);\n\n          case 12:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  },\n  SignInUser: function SignInUser(email, password) {\n    return _regeneratorRuntime.async(function SignInUser$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.prev = 0;\n            _context12.next = 3;\n            return _regeneratorRuntime.awrap(signInWithEmailAndPassword(auth, email, password));\n\n          case 3:\n            _context12.next = 8;\n            break;\n\n          case 5:\n            _context12.prev = 5;\n            _context12.t0 = _context12[\"catch\"](0);\n            console.log(\"Error @SignInUser\", _context12.t0);\n\n          case 8:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  },\n  SignInUserWithFacebook: function SignInUserWithFacebook() {\n    var provider, result, _user2, credential, token;\n\n    return _regeneratorRuntime.async(function SignInUserWithFacebook$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            _context13.prev = 0;\n            provider = new FacebookAuthProvider();\n            console.log(provider);\n            _context13.next = 5;\n            return _regeneratorRuntime.awrap(signInWithRedirect(auth, provider));\n\n          case 5:\n            _context13.next = 7;\n            return _regeneratorRuntime.awrap(getRedirectResult(auth));\n\n          case 7:\n            result = _context13.sent;\n\n            if (result) {\n              _user2 = result.user;\n              credential = FacebookAuthProvider.credentialFromResult(result);\n              token = credential.accessToken;\n            }\n\n            _context13.next = 14;\n            break;\n\n          case 11:\n            _context13.prev = 11;\n            _context13.t0 = _context13[\"catch\"](0);\n            console.log(\"Error @SignInUserWithFacebook\", _context13.t0);\n\n          case 14:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  },\n  DeleteUser: function DeleteUser() {\n    var _user3;\n\n    return _regeneratorRuntime.async(function DeleteUser$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            try {\n              _user3 = auth.currentUser;\n              deleteUser(_user3);\n            } catch (error) {\n              console.log(\"Error @DeleteUser\", error);\n            }\n\n          case 1:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  ResetPassword: function ResetPassword(email) {\n    return _regeneratorRuntime.async(function ResetPassword$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            _context15.prev = 0;\n            _context15.next = 3;\n            return _regeneratorRuntime.awrap(sendPasswordResetEmail(auth, email));\n\n          case 3:\n            return _context15.abrupt(\"return\", _context15.sent);\n\n          case 6:\n            _context15.prev = 6;\n            _context15.t0 = _context15[\"catch\"](0);\n            console.log(\"Error @ResetPassword\", _context15.t0);\n\n          case 9:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  },\n  UpdateEmail: function UpdateEmail(email) {\n    var _uid2, docRef;\n\n    return _regeneratorRuntime.async(function UpdateEmail$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            _context16.prev = 0;\n            _uid2 = Firebase.getCurrentUser().uid;\n            _context16.next = 4;\n            return _regeneratorRuntime.awrap(updateEmail(_uid2, email));\n\n          case 4:\n            docRef = doc(db, \"users\", _uid2);\n            _context16.next = 7;\n            return _regeneratorRuntime.awrap(updateDoc(docRef, {\n              email: email\n            }));\n\n          case 7:\n            _context16.next = 12;\n            break;\n\n          case 9:\n            _context16.prev = 9;\n            _context16.t0 = _context16[\"catch\"](0);\n            console.log(\"Error @UpdateEmail\", _context16.t0);\n\n          case 12:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  },\n  UpdatePassword: function UpdatePassword(password) {\n    return _regeneratorRuntime.async(function UpdatePassword$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            _context17.prev = 0;\n            _context17.next = 3;\n            return _regeneratorRuntime.awrap(updatePassword(currentUser, password));\n\n          case 3:\n            _context17.next = 8;\n            break;\n\n          case 5:\n            _context17.prev = 5;\n            _context17.t0 = _context17[\"catch\"](0);\n            console.log(\"Error @UpdatePassword\", _context17.t0);\n\n          case 8:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  },\n  UpdateUsername: function UpdateUsername(NewUsername) {\n    var _uid3, docRef;\n\n    return _regeneratorRuntime.async(function UpdateUsername$(_context18) {\n      while (1) {\n        switch (_context18.prev = _context18.next) {\n          case 0:\n            _context18.prev = 0;\n            _uid3 = Firebase.getCurrentUser().uid;\n            docRef = doc(db, \"users\", _uid3);\n            _context18.next = 5;\n            return _regeneratorRuntime.awrap(updateDoc(docRef, {\n              username: NewUsername\n            }));\n\n          case 5:\n            _context18.next = 10;\n            break;\n\n          case 7:\n            _context18.prev = 7;\n            _context18.t0 = _context18[\"catch\"](0);\n            console.log(\"Error @updateUsername\", _context18.t0);\n\n          case 10:\n          case \"end\":\n            return _context18.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  },\n  retrieveQR: function retrieveQR() {\n    return _regeneratorRuntime.async(function retrieveQR$(_context19) {\n      while (1) {\n        switch (_context19.prev = _context19.next) {\n          case 0:\n            try {} catch (_unused) {\n              console.log(\"Could not retrive QR\");\n            }\n\n          case 1:\n          case \"end\":\n            return _context19.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  CreateNewGroup: function CreateNewGroup(Group) {\n    var _uid4, UserRef, GroupPhotoUrl;\n\n    return _regeneratorRuntime.async(function CreateNewGroup$(_context20) {\n      while (1) {\n        switch (_context20.prev = _context20.next) {\n          case 0:\n            _context20.prev = 0;\n            _uid4 = Firebase.getCurrentUser().uid;\n            UserRef = doc(db, \"users\", _uid4);\n            _context20.next = 5;\n            return _regeneratorRuntime.awrap(updateDoc(UserRef, {\n              groups: arrayUnion(Group.GroupID)\n            }));\n\n          case 5:\n            GroupPhotoUrl = \"default\";\n            _context20.next = 8;\n            return _regeneratorRuntime.awrap(setDoc(doc(db, \"groups\", Group.GroupID), {\n              groupname: Group.Groupname,\n              groupID: Group.GroupID,\n              color: Group.Color,\n              members: [_uid4],\n              privacy: Group.Privacy,\n              GroupPhotoUrl: GroupPhotoUrl\n            }));\n\n          case 8:\n            if (!Group.GroupPhoto) {\n              _context20.next = 12;\n              break;\n            }\n\n            _context20.next = 11;\n            return _regeneratorRuntime.awrap(Firebase.uploadGroupPhoto(Group.GroupPhoto, Group.GroupID));\n\n          case 11:\n            GroupPhotoUrl = _context20.sent;\n\n          case 12:\n            Firebase.CacheGroupData();\n            _context20.next = 18;\n            break;\n\n          case 15:\n            _context20.prev = 15;\n            _context20.t0 = _context20[\"catch\"](0);\n            console.log(\"Error @CreateNewGroup\", _context20.t0);\n\n          case 18:\n          case \"end\":\n            return _context20.stop();\n        }\n      }\n    }, null, null, [[0, 15]], Promise);\n  },\n  RetriveGroupData: function RetriveGroupData() {\n    var _uid5, snap;\n\n    return _regeneratorRuntime.async(function RetriveGroupData$(_context21) {\n      while (1) {\n        switch (_context21.prev = _context21.next) {\n          case 0:\n            _context21.prev = 0;\n            _uid5 = Firebase.getCurrentUser().uid;\n            _context21.next = 4;\n            return _regeneratorRuntime.awrap(getDoc(doc(db, \"users\", _uid5)));\n\n          case 4:\n            snap = _context21.sent;\n            return _context21.abrupt(\"return\", snap.data().groups);\n\n          case 8:\n            _context21.prev = 8;\n            _context21.t0 = _context21[\"catch\"](0);\n            console.log(\"Error @RetriveGroupData\", _context21.t0);\n\n          case 11:\n          case \"end\":\n            return _context21.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  },\n  LoadGroups: function LoadGroups(array) {\n    var objectList, arrayLength, i, Snap;\n    return _regeneratorRuntime.async(function LoadGroups$(_context22) {\n      while (1) {\n        switch (_context22.prev = _context22.next) {\n          case 0:\n            _context22.prev = 0;\n            objectList = [];\n            arrayLength = array.length;\n            i = 0;\n\n          case 4:\n            if (!(i < arrayLength)) {\n              _context22.next = 12;\n              break;\n            }\n\n            _context22.next = 7;\n            return _regeneratorRuntime.awrap(getDoc(doc(db, \"groups\", array[i])));\n\n          case 7:\n            Snap = _context22.sent;\n            objectList.push({\n              groupname: Snap.data().groupname,\n              groupID: Snap.data().groupID,\n              color: Snap.data().color,\n              members: Snap.data().members,\n              privacy: Snap.data().privacy,\n              GroupPhotoUrl: Snap.data().GroupPhotoUrl\n            });\n\n          case 9:\n            i++;\n            _context22.next = 4;\n            break;\n\n          case 12:\n            ;\n            return _context22.abrupt(\"return\", objectList);\n\n          case 16:\n            _context22.prev = 16;\n            _context22.t0 = _context22[\"catch\"](0);\n            console.log(\"Could not Load Groups\", _context22.t0);\n\n          case 19:\n          case \"end\":\n            return _context22.stop();\n        }\n      }\n    }, null, null, [[0, 16]], Promise);\n  },\n  LeaveGroup: function LeaveGroup(GroupID) {\n    var _uid6, UserRef, _GroupRef2;\n\n    return _regeneratorRuntime.async(function LeaveGroup$(_context23) {\n      while (1) {\n        switch (_context23.prev = _context23.next) {\n          case 0:\n            _context23.prev = 0;\n            _uid6 = Firebase.getCurrentUser().uid;\n            UserRef = doc(db, \"users\", _uid6);\n            _context23.next = 5;\n            return _regeneratorRuntime.awrap(updateDoc(UserRef, {\n              groups: arrayRemove(GroupID)\n            }));\n\n          case 5:\n            _GroupRef2 = doc(db, \"groups\", GroupID);\n            _context23.next = 8;\n            return _regeneratorRuntime.awrap(updateDoc(_GroupRef2, {\n              members: arrayRemove(_uid6)\n            }));\n\n          case 8:\n            _context23.next = 13;\n            break;\n\n          case 10:\n            _context23.prev = 10;\n            _context23.t0 = _context23[\"catch\"](0);\n            console.log(\"Error @LeaveGroup\", _context23.t0);\n\n          case 13:\n          case \"end\":\n            return _context23.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  },\n  JoinGroup: function JoinGroup(GroupID) {\n    var _uid7, UserRef, _GroupRef3, arrayObject, Snap;\n\n    return _regeneratorRuntime.async(function JoinGroup$(_context24) {\n      while (1) {\n        switch (_context24.prev = _context24.next) {\n          case 0:\n            _context24.prev = 0;\n            _uid7 = Firebase.getCurrentUser().uid;\n            UserRef = doc(db, \"users\", _uid7);\n            _context24.next = 5;\n            return _regeneratorRuntime.awrap(updateDoc(UserRef, {\n              groups: arrayUnion(GroupID)\n            }));\n\n          case 5:\n            _GroupRef3 = doc(db, \"groups\", GroupID);\n            _context24.next = 8;\n            return _regeneratorRuntime.awrap(updateDoc(_GroupRef3, {\n              members: arrayUnion(_uid7)\n            }));\n\n          case 8:\n            arrayObject = [];\n            _context24.next = 11;\n            return _regeneratorRuntime.awrap(getDoc(doc(db, \"groups\", GroupID)));\n\n          case 11:\n            Snap = _context24.sent;\n            arrayObject.push({\n              groupname: Snap.data().groupname,\n              groupID: Snap.data().groupID,\n              color: Snap.data().color,\n              members: Snap.data().members,\n              privacy: Snap.data().privacy,\n              GroupPhotoUrl: Snap.data().GroupPhotoUrl\n            });\n            console.log(arrayObject);\n            Firebase.CacheGroupData(arrayObject);\n            _context24.next = 20;\n            break;\n\n          case 17:\n            _context24.prev = 17;\n            _context24.t0 = _context24[\"catch\"](0);\n            console.log(\"Error @JoinGroup\", _context24.t0);\n\n          case 20:\n          case \"end\":\n            return _context24.stop();\n        }\n      }\n    }, null, null, [[0, 17]], Promise);\n  },\n  AddMemberToGroup: function AddMemberToGroup(member) {\n    var docRef;\n    return _regeneratorRuntime.async(function AddMemberToGroup$(_context25) {\n      while (1) {\n        switch (_context25.prev = _context25.next) {\n          case 0:\n            _context25.prev = 0;\n            docRef = doc(db, \"users\", uid);\n            _context25.next = 4;\n            return _regeneratorRuntime.awrap(updateDoc(docRef, {\n              Member: member\n            }));\n\n          case 4:\n            _context25.next = 9;\n            break;\n\n          case 6:\n            _context25.prev = 6;\n            _context25.t0 = _context25[\"catch\"](0);\n            console.log(\"Error @AddToGroup\", _context25.t0);\n\n          case 9:\n          case \"end\":\n            return _context25.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  },\n  AddTask: function AddTask() {\n    return _regeneratorRuntime.async(function AddTask$(_context26) {\n      while (1) {\n        switch (_context26.prev = _context26.next) {\n          case 0:\n            _context26.prev = 0;\n            _context26.next = 3;\n            return _regeneratorRuntime.awrap(setDoc(doc(db, \"users\", uid), {\n              username: user.username,\n              email: user.email,\n              profilePhotoUrl: profilePhotoUrl\n            }));\n\n          case 3:\n            _context26.next = 8;\n            break;\n\n          case 5:\n            _context26.prev = 5;\n            _context26.t0 = _context26[\"catch\"](0);\n            console.log(\"Error @AddTask\", _context26.t0);\n\n          case 8:\n          case \"end\":\n            return _context26.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  },\n  UpdateTask: function UpdateTask() {\n    var docRef;\n    return _regeneratorRuntime.async(function UpdateTask$(_context27) {\n      while (1) {\n        switch (_context27.prev = _context27.next) {\n          case 0:\n            _context27.prev = 0;\n            docRef = doc(db, \"users\", uid);\n            _context27.next = 4;\n            return _regeneratorRuntime.awrap(updateDoc(docRef, {\n              TaskName: TaskName,\n              Frequency: Frequency\n            }));\n\n          case 4:\n            _context27.next = 9;\n            break;\n\n          case 6:\n            _context27.prev = 6;\n            _context27.t0 = _context27[\"catch\"](0);\n            console.log(\"Error @UpdateTask\", _context27.t0);\n\n          case 9:\n          case \"end\":\n            return _context27.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  },\n  AddRoutine: function AddRoutine(TaskName, frequency, Members) {\n    return _regeneratorRuntime.async(function AddRoutine$(_context28) {\n      while (1) {\n        switch (_context28.prev = _context28.next) {\n          case 0:\n            _context28.prev = 0;\n            _context28.next = 3;\n            return _regeneratorRuntime.awrap(setDoc(doc(db, \"users\", uid), {\n              username: user.username,\n              email: user.email,\n              profilePhotoUrl: profilePhotoUrl\n            }));\n\n          case 3:\n            _context28.next = 8;\n            break;\n\n          case 5:\n            _context28.prev = 5;\n            _context28.t0 = _context28[\"catch\"](0);\n            console.log(\"Error @AddRutine\", _context28.t0);\n\n          case 8:\n          case \"end\":\n            return _context28.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  },\n  UpdateRoutine: function UpdateRoutine(TaskName, frequency, Members) {\n    var docRef;\n    return _regeneratorRuntime.async(function UpdateRoutine$(_context29) {\n      while (1) {\n        switch (_context29.prev = _context29.next) {\n          case 0:\n            _context29.prev = 0;\n            docRef = doc(db, \"users\", uid);\n            _context29.next = 4;\n            return _regeneratorRuntime.awrap(updateDoc(docRef, {\n              TaskName: TaskName,\n              Frequency: Frequency\n            }));\n\n          case 4:\n            _context29.next = 9;\n            break;\n\n          case 6:\n            _context29.prev = 6;\n            _context29.t0 = _context29[\"catch\"](0);\n            console.log(\"Error @UpdateRutine\", _context29.t0);\n\n          case 9:\n          case \"end\":\n            return _context29.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  },\n  TaskComplete: function TaskComplete() {\n    return _regeneratorRuntime.async(function TaskComplete$(_context30) {\n      while (1) {\n        switch (_context30.prev = _context30.next) {\n          case 0:\n            try {} catch (error) {\n              console.log(\"Error @TaskComplete\", error);\n            }\n\n          case 1:\n          case \"end\":\n            return _context30.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  StayLoggedIn: function StayLoggedIn() {\n    return _regeneratorRuntime.async(function StayLoggedIn$(_context31) {\n      while (1) {\n        switch (_context31.prev = _context31.next) {\n          case 0:\n            try {} catch (error) {\n              console.log(\"Error @StayLoggedIn\", error);\n            }\n\n          case 1:\n          case \"end\":\n            return _context31.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  RetriveMessages: function RetriveMessages() {\n    var DocRef, q;\n    return _regeneratorRuntime.async(function RetriveMessages$(_context32) {\n      while (1) {\n        switch (_context32.prev = _context32.next) {\n          case 0:\n            try {\n              s;\n              DocRef = doc(db, \"chats\", \"snusken\");\n              q = query(DocRef, orderBy(\"createdAt\", \"desc\"));\n              onSnapshot(q, function (querySnapshot) {\n                var MessageArray = [];\n                querySnapshot.forEach(function (doc) {\n                  MessageArray.push(doc.data());\n                  console.log(\"retrived messages\", MessageArray);\n                  return MessageArray;\n                });\n              });\n            } catch (error) {\n              console.log(\"Error @RetriveMessages\", error);\n            }\n\n          case 1:\n          case \"end\":\n            return _context32.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  SendMessage: function SendMessage(text) {\n    var uid;\n    return _regeneratorRuntime.async(function SendMessage$(_context33) {\n      while (1) {\n        switch (_context33.prev = _context33.next) {\n          case 0:\n            uid = Firebase.getCurrentUser().uid;\n            _context33.prev = 1;\n            _context33.next = 4;\n            return _regeneratorRuntime.awrap(setDoc(doc(db, \"chats\", \"snusken\"), {\n              id: uid,\n              text: text\n            }));\n\n          case 4:\n            _context33.next = 9;\n            break;\n\n          case 6:\n            _context33.prev = 6;\n            _context33.t0 = _context33[\"catch\"](1);\n            console.log(\"Error @SendMessage\", _context33.t0);\n\n          case 9:\n          case \"end\":\n            return _context33.stop();\n        }\n      }\n    }, null, null, [[1, 6]], Promise);\n  },\n  RetrivingMessages: function RetrivingMessages(text) {\n    return _regeneratorRuntime.async(function RetrivingMessages$(_context34) {\n      while (1) {\n        switch (_context34.prev = _context34.next) {\n          case 0:\n            setState({\n              readError: null\n            });\n\n            try {\n              database.ref(\"chats\").on(\"value\", function (snapshot) {\n                var chats = [];\n                snapshot.forEach(function (snap) {\n                  chats.push(snap.val());\n                });\n                setState({\n                  chats: chats\n                });\n              });\n            } catch (error) {\n              setState({\n                readError: error.message\n              });\n            }\n\n          case 2:\n          case \"end\":\n            return _context34.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  SendingMessages: function SendingMessages(text) {\n    return _regeneratorRuntime.async(function SendingMessages$(_context35) {\n      while (1) {\n        switch (_context35.prev = _context35.next) {\n          case 0:\n            preventDefault();\n            setState({\n              writeError: null\n            });\n            _context35.prev = 2;\n            _context35.next = 5;\n            return _regeneratorRuntime.awrap(db.ref(\"chats\").push({\n              content: state.content,\n              timestamp: Date.now(),\n              uid: state.user.uid\n            }));\n\n          case 5:\n            setState({\n              content: ''\n            });\n            _context35.next = 11;\n            break;\n\n          case 8:\n            _context35.prev = 8;\n            _context35.t0 = _context35[\"catch\"](2);\n            setState({\n              writeError: _context35.t0.message\n            });\n\n          case 11:\n          case \"end\":\n            return _context35.stop();\n        }\n      }\n    }, null, null, [[2, 8]], Promise);\n  },\n  RetriveFeed: function RetriveFeed(SortSettings) {\n    var objectList, GroupArray, groups, i, docRef, collectionRef, q, querySnapshot, SortedFeed;\n    return _regeneratorRuntime.async(function RetriveFeed$(_context36) {\n      while (1) {\n        switch (_context36.prev = _context36.next) {\n          case 0:\n            objectList = [];\n            GroupArray = [];\n            _context36.prev = 2;\n            _context36.next = 5;\n            return _regeneratorRuntime.awrap(Firebase.RetriveGroupsStorage());\n\n          case 5:\n            groups = _context36.sent;\n            groups.forEach(function (doc) {\n              GroupArray.push({\n                groupname: doc.groupID\n              });\n            });\n            i = 0;\n\n          case 8:\n            if (!(i < GroupArray.length)) {\n              _context36.next = 19;\n              break;\n            }\n\n            docRef = doc(db, \"groups\", GroupArray[i].groupname);\n            collectionRef = collection(docRef, \"posts\");\n            q = query(collectionRef, orderBy(\"id\"), limit(3));\n            _context36.next = 14;\n            return _regeneratorRuntime.awrap(getDocs(q));\n\n          case 14:\n            querySnapshot = _context36.sent;\n            querySnapshot.forEach(function (doc) {\n              objectList.push({\n                id: doc.data().id,\n                user: doc.data().user,\n                avatar: doc.data().avatar,\n                postedAt: doc.data().postedAt,\n                post: doc.data().post,\n                Upvotes: doc.data().Upvotes,\n                Downvotes: doc.data().Downvotes\n              });\n            });\n\n          case 16:\n            i++;\n            _context36.next = 8;\n            break;\n\n          case 19:\n            return _context36.abrupt(\"return\", objectList);\n\n          case 23:\n            _context36.prev = 23;\n            _context36.t0 = _context36[\"catch\"](2);\n            console.log(\"Error @RetriveFeed\", _context36.t0);\n\n          case 26:\n          case \"end\":\n            return _context36.stop();\n        }\n      }\n    }, null, null, [[2, 23]], Promise);\n  },\n  AddPost: function AddPost(post, groupID) {\n    var docRef;\n    return _regeneratorRuntime.async(function AddPost$(_context37) {\n      while (1) {\n        switch (_context37.prev = _context37.next) {\n          case 0:\n            docRef = doc(db, \"groups\", groupID);\n            _context37.prev = 1;\n            _context37.next = 4;\n            return _regeneratorRuntime.awrap(setDoc(doc(docRef, \"posts\", post.id), {\n              id: post.id,\n              user: post.user,\n              avatar: post.avatar,\n              postedAt: post.postedAt,\n              post: post.post,\n              Upvotes: post.Upvotes,\n              Downvotes: post.Downvotes\n            }));\n\n          case 4:\n            _context37.next = 9;\n            break;\n\n          case 6:\n            _context37.prev = 6;\n            _context37.t0 = _context37[\"catch\"](1);\n            console.log(\"Error @AddPost\", _context37.t0);\n\n          case 9:\n          case \"end\":\n            return _context37.stop();\n        }\n      }\n    }, null, null, [[1, 6]], Promise);\n  },\n  UpdatePost: function UpdatePost(post, groupID) {\n    var docRef, postRef;\n    return _regeneratorRuntime.async(function UpdatePost$(_context38) {\n      while (1) {\n        switch (_context38.prev = _context38.next) {\n          case 0:\n            docRef = doc(db, \"groups\", groupID);\n            postRef = doc(docRef, \"\", \"\");\n\n            try {\n              updateDoc(postRef, post);\n            } catch (_unused2) {\n              console.log(\"Error @UpdatePost\");\n            }\n\n          case 3:\n          case \"end\":\n            return _context38.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  RetriveGroupsStorage: function RetriveGroupsStorage() {\n    var value, parsedJson, groups, objectArray, jsonValue;\n    return _regeneratorRuntime.async(function RetriveGroupsStorage$(_context39) {\n      while (1) {\n        switch (_context39.prev = _context39.next) {\n          case 0:\n            _context39.prev = 0;\n            _context39.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"groups\"));\n\n          case 3:\n            value = _context39.sent;\n\n            if (!(value !== null)) {\n              _context39.next = 9;\n              break;\n            }\n\n            parsedJson = JSON.parse(value);\n            return _context39.abrupt(\"return\", parsedJson);\n\n          case 9:\n            _context39.next = 11;\n            return _regeneratorRuntime.awrap(Firebase.RetriveGroupData());\n\n          case 11:\n            groups = _context39.sent;\n            _context39.next = 14;\n            return _regeneratorRuntime.awrap(Firebase.LoadGroups(groups));\n\n          case 14:\n            objectArray = _context39.sent;\n            jsonValue = JSON.stringify(objectArray);\n            _context39.next = 18;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"groups\", jsonValue));\n\n          case 18:\n            return _context39.abrupt(\"return\", objectArray);\n\n          case 19:\n            _context39.next = 24;\n            break;\n\n          case 21:\n            _context39.prev = 21;\n            _context39.t0 = _context39[\"catch\"](0);\n            console.log(\"Error @RetriveGroupsStorage\", _context39.t0);\n\n          case 24:\n          case \"end\":\n            return _context39.stop();\n        }\n      }\n    }, null, null, [[0, 21]], Promise);\n  },\n  SortGroupFeed: function SortGroupFeed(posts, sortsettings) {\n    return _regeneratorRuntime.async(function SortGroupFeed$(_context40) {\n      while (1) {\n        switch (_context40.prev = _context40.next) {\n          case 0:\n            try {\n              if (sortsettings === \"recent\") {}\n\n              if (sortsettings === \"upvotes\") {}\n            } catch (error) {\n              console.log(\"Error @SortGroupFeed\", error);\n            }\n\n          case 1:\n          case \"end\":\n            return _context40.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  ExplorationFeed: function ExplorationFeed() {\n    var objectList, q, querySnapshot;\n    return _regeneratorRuntime.async(function ExplorationFeed$(_context41) {\n      while (1) {\n        switch (_context41.prev = _context41.next) {\n          case 0:\n            _context41.prev = 0;\n            objectList = [];\n            q = query(collection(db, \"groups\"), where(\"privacy\", \"==\", false));\n            _context41.next = 5;\n            return _regeneratorRuntime.awrap(getDocs(q));\n\n          case 5:\n            querySnapshot = _context41.sent;\n            querySnapshot.forEach(function (doc) {\n              objectList.push({\n                groupID: doc.data().groupID,\n                groupname: doc.data().groupname,\n                GroupPhotoUrl: doc.data().GroupPhotoUrl\n              });\n            });\n            return _context41.abrupt(\"return\", objectList);\n\n          case 10:\n            _context41.prev = 10;\n            _context41.t0 = _context41[\"catch\"](0);\n            console.log(\"Error @ExplorationFeed\", _context41.t0);\n\n          case 13:\n          case \"end\":\n            return _context41.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  },\n  ProfileTheUser: function ProfileTheUser() {\n    return _regeneratorRuntime.async(function ProfileTheUser$(_context42) {\n      while (1) {\n        switch (_context42.prev = _context42.next) {\n          case 0:\n            try {} catch (error) {\n              console.log(\"Error @ProfileTheUser\", error);\n            }\n\n          case 1:\n          case \"end\":\n            return _context42.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  SearchForCommunities: function SearchForCommunities(Query) {\n    var groupList, q, querySnapshot;\n    return _regeneratorRuntime.async(function SearchForCommunities$(_context43) {\n      while (1) {\n        switch (_context43.prev = _context43.next) {\n          case 0:\n            _context43.prev = 0;\n            groupList = [];\n            q = query(GroupRef, where(\"groupname\", \"==\", \"Query\"));\n            _context43.next = 5;\n            return _regeneratorRuntime.awrap(getDocs(q));\n\n          case 5:\n            querySnapshot = _context43.sent;\n            querySnapshot.forEach(function (doc) {\n              groupList.push({\n                groupID: doc.data().groupID,\n                groupname: doc.data().groupname,\n                GroupPhotoUrl: doc.data().GroupPhotoUrl\n              });\n              console.log(groupList);\n              return groupList;\n            });\n            _context43.next = 12;\n            break;\n\n          case 9:\n            _context43.prev = 9;\n            _context43.t0 = _context43[\"catch\"](0);\n            console.log(\"Error @SearchForCommunities\", _context43.t0);\n\n          case 12:\n          case \"end\":\n            return _context43.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  }\n};\n\nvar FirebaseProvider = function FirebaseProvider(props) {\n  return _jsx(FirebaseContext.Provider, {\n    value: Firebase,\n    children: props.children\n  });\n};\n\nexport { FirebaseContext, FirebaseProvider };","map":{"version":3,"names":["React","createContext","useState","useEffect","useLayoutEffect","useCallback","AsyncStorage","initializeApp","getAuth","deleteUser","sendPasswordResetEmail","signOut","updatePassword","updateEmail","FacebookAuthProvider","getRedirectResult","signInWithRedirect","getStorage","ref","uploadBytes","getDownloadURL","getFirestore","setDoc","doc","updateDoc","getDoc","addDoc","orderBy","query","onSnapshot","collection","arrayUnion","arrayRemove","limit","getDocs","where","config","signInWithEmailAndPassword","createUserWithEmailAndPassword","SecureStore","getDatabase","app","storage","auth","db","FirebaseContext","database","Firebase","CacheUserContext","user","jsonValue","JSON","stringify","setItem","CacheGroupData","RetriveGroupData","groups","LoadGroups","objectArray","RemoveCacheGroupData","groupID","getItem","value","parsedJson","parse","console","log","indexOfObject","findIndex","object","splice","length","removeItem","ClearCacheGroupData","ValidateSignUpForm","email","password","UserRef","q","message","getCurrentUser","currentUser","createUser","uid","profilePhotoUrl","username","profilePhoto","uploadProfilePhoto","uri","getBlob","photo","imagesRef","uidRef","url","docRef","uploadGroupPhoto","GroupID","GroupRef","GroupPhotoUrl","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","onerror","TypeError","responseType","open","send","getUserInfo","exists","data","SignOutUser","deleteItemAsync","SignInUser","SignInUserWithFacebook","provider","result","credential","credentialFromResult","token","accessToken","DeleteUser","error","ResetPassword","UpdateEmail","UpdatePassword","UpdateUsername","NewUsername","retrieveQR","CreateNewGroup","Group","groupname","Groupname","color","Color","members","privacy","Privacy","GroupPhoto","snap","array","objectList","arrayLength","i","Snap","push","LeaveGroup","JoinGroup","arrayObject","AddMemberToGroup","member","Member","AddTask","UpdateTask","TaskName","Frequency","AddRoutine","frequency","Members","UpdateRoutine","TaskComplete","StayLoggedIn","RetriveMessages","s","DocRef","querySnapshot","MessageArray","forEach","SendMessage","text","id","RetrivingMessages","setState","readError","on","snapshot","chats","val","SendingMessages","preventDefault","writeError","content","state","timestamp","Date","now","RetriveFeed","SortSettings","GroupArray","RetriveGroupsStorage","collectionRef","avatar","postedAt","post","Upvotes","Downvotes","AddPost","UpdatePost","postRef","SortGroupFeed","posts","sortsettings","ExplorationFeed","ProfileTheUser","SearchForCommunities","Query","groupList","FirebaseProvider","props","children"],"sources":["/Users/havardskjaerstein/Desktop/Achive/context/FirebaseContext.js"],"sourcesContent":["import React, {createContext, useState,useEffect,\n        useLayoutEffect,useCallback } from \"react\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { initializeApp } from 'firebase/app';\nimport {getAuth, \n  deleteUser, \n  sendPasswordResetEmail, \n  signOut, \n  updatePassword, \n  updateEmail, \n  FacebookAuthProvider,\n  getRedirectResult,\n  signInWithRedirect,\n\n  } from \"firebase/auth\";\nimport {getStorage, \n  ref,\n  uploadBytes, \n  getDownloadURL, \n  } from \"firebase/storage\";\nimport {getFirestore, \n  setDoc, \n  doc, \n  updateDoc,\n  getDoc, \n  addDoc,\n  orderBy,\n  query,\n  onSnapshot,\n  collection,\n  arrayUnion,\n  arrayRemove, limit, getDocs, where, \n  } from \"firebase/firestore\";\nimport config from \"../config/Firebase\"\nimport {signInWithEmailAndPassword, createUserWithEmailAndPassword} from \"firebase/auth\"; \nimport * as SecureStore from 'expo-secure-store';\n\nimport { getDatabase } from \"firebase/database\";\n\n// Initialize Firebase\nconst app = initializeApp(config);\nconst storage = getStorage(app);\nconst auth = getAuth(app);\nconst db = getFirestore(app); \nconst FirebaseContext = createContext(); \nconst database = getDatabase(app);\n\n// DOCS: \n//https://firebase.google.com/docs\n\nconst Firebase = {\n\n  CacheUserContext: async (user) => {\n\n    const jsonValue = JSON.stringify(user)\n    await AsyncStorage.setItem(\"User\", jsonValue)\n  },    \n\n  //hent ting fra databasen for å oppdatere. Ikke fra telefonen. Consistency\n  CacheGroupData: async () => {\n\n      //henter ut hvilken grupper brukeren tilhører \n      const groups = await Firebase.RetriveGroupData(); \n\n      //returnerer et array av json objekter\n      const objectArray = await Firebase.LoadGroups(groups); \n\n      const jsonValue = JSON.stringify(objectArray)\n      await AsyncStorage.setItem(\n        \"groups\",\n        jsonValue\n      );\n  },\n\n  RemoveCacheGroupData: async (groupID) => {\n\n    const value = await AsyncStorage.getItem(\"groups\");\n    if (value !== null) {\n      //Hent ut data fra async storage\n      const parsedJson = JSON.parse(value)\n      console.log(parsedJson)\n\n      const indexOfObject = parsedJson.findIndex(object => {\n        return object.groupID === groupID;\n      });\n      \n      parsedJson.splice(indexOfObject, 1);\n      console.log(parsedJson)\n\n      //prøver å stringifye en tom \n      if (parsedJson.length === 0) {\n         console.log(\"Array is empty!\") \n         AsyncStorage.removeItem(\"groups\")\n        return 1; \n      }\n\n      //check if the array is empty. If it is put Null inside it. \n      const jsonValue = JSON.stringify(parsedJson)\n      await AsyncStorage.setItem(\n        \"groups\",\n        jsonValue\n      );\n\n      return parsedJson; \n\n    }else{\n     console.log(\" no groups to remove in persistent storage\") \n    }\n },  \n\n ClearCacheGroupData: async () => {\n\n  const value = await AsyncStorage.getItem(\"groups\");\n  if (value !== null) {\n\n    AsyncStorage.removeItem(\"groups\")\n\n  }else{\n   console.log(\" no groups to remove in persistent storage\") \n  }\n},  \n\nValidateSignUpForm: async (email, password) => {\n  try{\n    \n    //query databasen for en epost\n    const UserRef = collection(db, \"user\");\n    const q = query(UserRef, where(\"email\", \"==\", email));\n\n    if(q != null){\n      return 2; \n    } \n\n    //Sjekk først om legden på passordet er bra nok \n    if(password.length < 6){\n      return 1; \n    } \n\n\n    //Sjekk med databasen om en bruker har samme epost, brukernavn \n    return; \n\n  \n  } catch(error) {\n    console.log(\"Error @ValidateSignUpForm:\", error.message)\n  }\n\n\n},  \n\n  getCurrentUser: () => {\n    return auth.currentUser; \n  },\n\n  createUser: async (user) => {\n\n    try{\n      await createUserWithEmailAndPassword(auth, user.email, user.password);\n\n      const uid = Firebase.getCurrentUser().uid;\n\n      let profilePhotoUrl = \"default\";\n\n      console.log(\"Sets the docs to database\")\n      \n      await setDoc(doc(db, \"users\", uid), {\n        username: user.username, \n        email: user.email,\n        password: user.password,\n        profilePhotoUrl, \n        groups:[],\n       });\n\n      if(user.profilePhoto){\n        profilePhotoUrl = await Firebase.uploadProfilePhoto(user.profilePhoto)\n      }\n\n      delete user.password; \n      return{...user, profilePhotoUrl, uid}; \n\n    } catch(error) {\n      console.log(\"Error @createUser:\", error.message)\n    }\n  },\n\n  uploadProfilePhoto: async (uri) => {\n\n    const uid = Firebase.getCurrentUser().uid; \n\n    try{\n      const photo = await Firebase.getBlob(uri)\n      const imagesRef = ref(storage, 'profilePhotos');\n      const uidRef = ref(imagesRef, uid);\n\n      await uploadBytes(uidRef, photo); \n\n      const url = await getDownloadURL(ref(storage, uidRef)); \n      const docRef = doc(db, \"users\", uid);\n\n      await updateDoc(docRef, {\n        profilePhotoUrl: url\n     });\n      return url; \n\n    }catch(error){\n      console.log(\"Error @uploadProfilePhoto\", error)\n    }\n  },\n\n  uploadGroupPhoto: async (uri, GroupID) => {\n\n    try{\n      console.log(\"1\")\n      const photo = await Firebase.getBlob(uri)\n      const imagesRef = ref(storage, 'GroupPhotos');\n      const uidRef = ref(imagesRef, GroupID);\n\n      await uploadBytes(uidRef, photo); \n      console.log(\"2\")\n      const url = await getDownloadURL(ref(storage, uidRef)); \n      const GroupRef = doc(db, \"groups\", GroupID);\n\n      await updateDoc(GroupRef, {\n        GroupPhotoUrl: url\n     });\n     console.log(\"3\")\n      return url; \n\n    }catch(error){\n      console.log(\"Error @uploadGroupPhoto\", error)\n    }\n  },\n    \n  getBlob: async(uri) => {\n    return await new Promise((resolve, reject) => {\n      //creates XHR object\n      const xhr = new XMLHttpRequest()\n      xhr.onload = () => {\n        resolve(xhr.response)\n      };\n      xhr.onerror = () => {\n        reject(new TypeError(\"Network request failed\"))\n      };\n      xhr.responseType = \"blob\";\n      //takes in three arguments, type of request, url/file, async or not\n      xhr.open(\"GET\", uri, true); \n      xhr.send(null);\n    })\n  },\n\n  getUserInfo: async (uid) => {\n    try{\n      const docRef = doc(db, \"users\", uid);\n      const user = await getDoc(docRef);\n\n      if(user.exists()){\n        return user.data(); \n      } else {\n        console.log(\"Can't get document @getUserInfo!\");\n      }\n      }catch(error){\n        console.log(\"error @getUserInfo\", error)\n      }\n    },\n\n  SignOutUser: async () => {\n    try{\n\n      await SecureStore.deleteItemAsync(\"User\");\n    \n      await signOut(auth);\n      return true; \n\n    }catch(error){\n      console.log(\"Error @SignOutUser\", error)\n    }\n    return false; \n  }, \n\n  SignInUser: async (email, password) => {\n    try{\n      await signInWithEmailAndPassword(auth, email, password); \n    }catch(error){\n      console.log(\"Error @SignInUser\", error)\n    }\n  },\n\n  SignInUserWithFacebook: async () => {\n    try{\n      const provider = new FacebookAuthProvider();\n      console.log(provider)\n      // This will trigger a full page redirect away from your app\n      await signInWithRedirect(auth, provider);\n      // After returning from the redirect when your app initializes you can obtain the result\n      const result = await getRedirectResult(auth);\n      if (result) {\n        // This is the signed-in user\n        const user = result.user;\n        // This gives you a Facebook Access Token.\n        const credential = FacebookAuthProvider.credentialFromResult(result);\n        const token = credential.accessToken;\n      }\n    }catch(error){\n      console.log(\"Error @SignInUserWithFacebook\", error)\n    }\n  },\n  DeleteUser: async () => {\n    try{\n      const user = auth.currentUser\n      deleteUser(user); \n    }catch(error){\n      console.log(\"Error @DeleteUser\", error)\n    }\n  }, \n\n  ResetPassword: async (email) => {\n    try{\n      return await sendPasswordResetEmail(auth, email); \n    }catch(error){\n      console.log(\"Error @ResetPassword\", error)\n    }\n  },\n\n  UpdateEmail: async (email) => {\n    try{\n      const uid = Firebase.getCurrentUser().uid; \n      await updateEmail(uid, email); \n\n      const docRef = doc(db, \"users\", uid);\n      //Update the database with the new email address\n      await updateDoc(docRef, {\n        email: email, \n      });\n\n    }catch(error){\n      console.log(\"Error @UpdateEmail\", error)\n    }\n  },\n\n  UpdatePassword: async (password) => {\n    try{\n      await updatePassword(currentUser, password);\n    }catch(error){\n      console.log(\"Error @UpdatePassword\", error)\n    }\n  },\n\n  UpdateUsername: async (NewUsername) => {\n    try{\n      const uid = Firebase.getCurrentUser().uid; \n      const docRef = doc(db, \"users\", uid);\n\n      await updateDoc(docRef, {\n        username: NewUsername, \n      });\n      \n    }catch(error){\n      console.log(\"Error @updateUsername\", error)\n    }\n  },\n\n  retrieveQR: async () => {\n    try{\n\n    } catch {\n      console.log(\"Could not retrive QR\")\n    }\n  }, \n  \n  //For å lage ei helt ny gruppe\n  CreateNewGroup: async (Group) => {\n\n    try{\n      //Gå også inn på user id og oppdater groups\n      const uid = Firebase.getCurrentUser().uid;\n      const UserRef = doc(db, \"users\", uid);\n\n      await updateDoc(UserRef, {\n        groups: arrayUnion(Group.GroupID)\n      });\n\n      let GroupPhotoUrl = \"default\"\n      \n      await setDoc(doc(db, \"groups\", Group.GroupID), {\n        groupname: Group.Groupname, \n        groupID: Group.GroupID, \n        color: Group.Color, \n        members: [uid],\n        privacy: Group.Privacy,\n        GroupPhotoUrl: GroupPhotoUrl\n        \n        //EncodedSVG: encodedData\n        //GroupPicture: picture\n      });\n      \n      if(Group.GroupPhoto){\n        GroupPhotoUrl = await Firebase.uploadGroupPhoto(Group.GroupPhoto, Group.GroupID)\n      }\n\n      //update persistent storage with the new group\n      Firebase.CacheGroupData()\n        \n    }catch(error){\n      console.log(\"Error @CreateNewGroup\", error)\n    }\n  }, \n\n   //Returnerer en liste over hvilke grupper man tilhører \n  RetriveGroupData: async () => {\n    try{\n     \n      const uid = Firebase.getCurrentUser().uid;\n      const snap = await getDoc(doc(db, \"users\", uid));\n      return snap.data().groups; \n      \n    }catch(error){\n      console.log(\"Error @RetriveGroupData\", error)\n    }\n  }, \n  \n  //hent ut objektene til gruppene\n  LoadGroups: async (array) => {\n    try{\n      \n      const objectList = [];\n      var arrayLength = array.length;\n      \n      for (var i = 0; i < arrayLength; i++) {\n        \n        const Snap = await getDoc(doc(db, \"groups\", array[i]))\n\n        objectList.push({\n          groupname: Snap.data().groupname, \n          groupID: Snap.data().groupID, \n          color: Snap.data().color, \n          members: Snap.data().members, \n          privacy: Snap.data().privacy,\n          GroupPhotoUrl: Snap.data().GroupPhotoUrl,\n        })\n      }; \n      \n      //returnerer en Liste med objekter.\n      return objectList; \n\n    } catch(error) {\n      console.log(\"Could not Load Groups\", error)\n    }\n  }, \n\n\n  LeaveGroup: async (GroupID) => {\n    try{\n\n      //updates the users data\n      const uid = Firebase.getCurrentUser().uid;\n      const UserRef = doc(db, \"users\", uid);\n\n      // Atomically remove a region from the \"regions\" array field.\n      await updateDoc(UserRef, {\n          groups: arrayRemove(GroupID)\n      }); \n\n    //updates the group data\n      const GroupRef = doc(db, \"groups\", GroupID);\n      // Atomically remove a region from the \"regions\" array field.\n      await updateDoc(GroupRef, {\n          members: arrayRemove(uid)\n      });\n\n    }catch(error){\n      console.log(\"Error @LeaveGroup\", error)\n    }\n  }, \n\n  JoinGroup: async (GroupID) => {\n\n    try{\n     //updates the users data\n     const uid = Firebase.getCurrentUser().uid;\n     const UserRef = doc(db, \"users\", uid);\n     // Atomically remove a region from the \"regions\" array field.\n     await updateDoc(UserRef, {\n         groups: arrayUnion(GroupID)\n     }); \n \n    //updates the group data\n     const GroupRef = doc(db, \"groups\", GroupID);\n     // Atomically remove a region from the \"regions\" array field.\n     await updateDoc(GroupRef,{\n         members: arrayUnion(uid)\n    });\n\n    //get the group data\n    let arrayObject = [];\n    const Snap = await getDoc(doc(db, \"groups\", GroupID ))\n\n    arrayObject.push({\n      groupname: Snap.data().groupname, \n      groupID: Snap.data().groupID, \n      color: Snap.data().color, \n      members: Snap.data().members, \n      privacy: Snap.data().privacy,\n      GroupPhotoUrl: Snap.data().GroupPhotoUrl,\n    })\n\n    console.log(arrayObject); \n\n    //update persistent storage with the new group\n    Firebase.CacheGroupData(arrayObject)\n    \n    }catch(error){\n      console.log(\"Error @JoinGroup\", error)\n    }\n  }, \n\n  AddMemberToGroup: async (member) => {\n    try{\n      const docRef = doc(db, \"users\", uid);\n      //Update the database with the new email address\n      await updateDoc(docRef, {\n        Member: member, \n      });\n    }catch(error){\n      console.log(\"Error @AddToGroup\", error)\n    }\n  }, \n\n  AddTask: async () => {\n    try{\n      await setDoc(doc(db, \"users\", uid), {\n        username: user.username, \n        email: user.email,\n        profilePhotoUrl, \n       });\n    }catch(error){\n      console.log(\"Error @AddTask\", error)\n    }\n  }, \n\n  UpdateTask: async () => {\n    try{\n\n      const docRef = doc(db, \"users\", uid);\n      //Update the database with the new email address\n      await updateDoc(docRef, {\n        TaskName: TaskName, \n        Frequency: Frequency\n\n      });\n\n    }catch(error){\n      console.log(\"Error @UpdateTask\", error)\n    }\n  }, \n\n  AddRoutine: async (TaskName, frequency, Members) => {\n    try{\n\n      await setDoc(doc(db, \"users\", uid), {\n        username: user.username, \n        email: user.email,\n        profilePhotoUrl, \n       });\n\n    }catch(error){\n      console.log(\"Error @AddRutine\", error)\n    }\n  }, \n\n  UpdateRoutine: async (TaskName, frequency, Members) => {\n    try{\n      const docRef = doc(db, \"users\", uid);\n      //Update the database with the new email address\n      await updateDoc(docRef, {\n        TaskName: TaskName, \n        Frequency: Frequency\n\n      });\n\n    }catch(error){\n      console.log(\"Error @UpdateRutine\", error)\n    }\n  }, \n\n  TaskComplete: async () => {\n    try{\n\n    }catch(error){\n      console.log(\"Error @TaskComplete\", error)\n    }\n  }, \n\n  StayLoggedIn: async () => {\n    try{\n\n    }catch(error){\n      console.log(\"Error @StayLoggedIn\", error)\n    }\n  },\n\n  RetriveMessages: async () => {\n    try{\ns\n      const DocRef = doc(db, \"chats\", \"snusken\" );\n      const q = query(DocRef, orderBy(\"createdAt\", \"desc\"));\n      //const taskQuery = doc(collection(db, \"chats\"), where(\"GroupID\", \"==\", groupID))\n      onSnapshot(q, querySnapshot => {\n          const MessageArray = []\n          querySnapshot.forEach((doc) => {\n            MessageArray.push(doc.data())\n            console.log(\"retrived messages\", MessageArray)\n            return MessageArray; \n          })\n      });\n    }catch(error){\n      console.log(\"Error @RetriveMessages\", error)\n      // unsubscribe(); når brukeren går ut av chatterommet\n    }\n  }, \n\n  SendMessage: async (text) => {\n    \n    const uid = Firebase.getCurrentUser().uid;\n\n    try{\n      await setDoc(doc(db, \"chats\", \"snusken\"), {\n        id: uid,\n        text, \n      });\n      }catch(error){\n        console.log(\"Error @SendMessage\", error)\n      }\n    \n    }, \n\n  RetrivingMessages: async (text) => {\n  \n    setState({ readError: null });\n    try {\n      database.ref(\"chats\").on(\"value\", snapshot => {\n        let chats = [];\n        snapshot.forEach((snap) => {\n          chats.push(snap.val());\n        });\n        setState({ chats });\n      });\n    } catch (error) {\n      setState({ readError: error.message });\n    }\n  },\n\n  SendingMessages: async (text) => {\n  \n    preventDefault();\n    setState({ writeError: null });\n    try {\n      await db.ref(\"chats\").push({\n        content: state.content,\n        timestamp: Date.now(),\n        uid: state.user.uid\n      });\n      setState({ content: '' });\n    } catch (error) {\n      setState({ writeError: error.message });\n    }\n  }, \n\n  RetriveFeed: async (SortSettings) => {\n\n    const objectList = [];\n    const GroupArray = [];\n\n    try {\n\n      const groups = await Firebase.RetriveGroupsStorage(); \n      \n      groups.forEach((doc) => {\n        GroupArray.push({\n          groupname: doc.groupID, \n        })\n      })\n\n      for (let i = 0; i < GroupArray.length; i++) {\n\n        const docRef = doc(db, \"groups\", GroupArray[i].groupname); \n        const collectionRef = collection(docRef, \"posts\"); \n  \n        const q = query(collectionRef, orderBy(\"id\"), limit(3));\n        const querySnapshot = await getDocs(q);\n  \n        querySnapshot.forEach((doc) => {\n          \n            objectList.push({\n            id: doc.data().id, \n            user: doc.data().user, \n            avatar: doc.data().avatar, \n            postedAt: doc.data().postedAt, \n            post: doc.data().post,   \n            Upvotes: doc.data().Upvotes, \n            Downvotes: doc.data().Downvotes, \n          })\n        })\n      }\n  \n      return objectList; \n\n      const SortedFeed = SortGroupFeed(objectList, SortSettings); \n\n    }catch (error) {\n      console.log(\"Error @RetriveFeed\", error)\n    }\n  }, \n\nAddPost: async (post, groupID) => {\n  \n  const docRef = doc(db, \"groups\", groupID); \n\n  try{\n    await setDoc(doc(docRef, \"posts\", post.id), {\n      id: post.id, \n      user: post.user, \n      avatar: post.avatar, \n      postedAt: post.postedAt, \n      post: post.post,   \n      Upvotes: post.Upvotes, \n      Downvotes: post.Downvotes\n    });\n\n    }catch(error){\n      console.log(\"Error @AddPost\", error)\n    }\n  }, \n\nUpdatePost: async (post, groupID) => {\n  \n  const docRef = doc(db, \"groups\", groupID); \n  const postRef = doc(docRef, \"\", \"\")\n\n  try{\n    updateDoc(postRef, post)\n  }catch{\n    console.log(\"Error @UpdatePost\")\n  }\n}, \n\nRetriveGroupsStorage: async () => {\n\n  try {\n\n    const value = await AsyncStorage.getItem(\"groups\");\n\n    if (value !== null) {\n      const parsedJson = JSON.parse(value)\n      return parsedJson; \n\n    }else{\n      //henter ut hvilken grupper brukeren tilhører \n      const groups = await Firebase.RetriveGroupData(); \n      //returnerer et array av json objekter\n      const objectArray = await Firebase.LoadGroups(groups); \n\n      const jsonValue = JSON.stringify(objectArray)\n      await AsyncStorage.setItem(\n        \"groups\",\n        jsonValue\n      );\n      return objectArray; \n    }\n  } catch (error) {\n    console.log(\"Error @RetriveGroupsStorage\", error)\n  }\n},\n\nSortGroupFeed: async (posts, sortsettings) => {\n\n  try{\n    /*sorter postene etter \n    -Upvotes \n    -nylige \n    -\n\n    */\n   if(sortsettings === \"recent\"){\n    //sjekker \n\n   }\n   if(sortsettings === \"upvotes\"){\n\n    \n  }\n\n    \n    }catch(error){\n      console.log(\"Error @SortGroupFeed\", error)\n    }\n  }, \n\n  ExplorationFeed: async () => {\n\n  try{\n\n    const objectList = [];\n\n    const q = query(collection(db, \"groups\"), where(\"privacy\", \"==\", false));\n    const querySnapshot = await getDocs(q);\n\n    querySnapshot.forEach((doc) => {\n        objectList.push({\n        groupID: doc.data().groupID, \n        groupname: doc.data().groupname, \n        GroupPhotoUrl: doc.data().GroupPhotoUrl\n      })\n    })\n    \n    return objectList; \n    \n    }catch(error){\n      console.log(\"Error @ExplorationFeed\", error)\n    }\n  }, \n  \n  ProfileTheUser: async () => {\n\n    try{\n      /*\n      Try and make a profile\n      What data points would i need to suggest the best content?\n      -Hvilken type grupper bruker man mest tid i. \n      -Hvilken grupper er andre i samme gruppe med i\n      \n      */\n  \n      \n      }catch(error){\n        console.log(\"Error @ProfileTheUser\", error)\n      }\n    }, \n\n  SearchForCommunities: async (Query) => {\n\n    try{\n\n      const groupList = [];\n\n      const q = query(GroupRef, where(\"groupname\", \"==\", \"Query\"));\n      const querySnapshot = await getDocs(q);\n\n      querySnapshot.forEach((doc) => {\n      \n        groupList.push({\n        groupID: doc.data().groupID, \n        groupname: doc.data().groupname, \n        GroupPhotoUrl: doc.data().GroupPhotoUrl\n      })\n\n      console.log(groupList)\n      return groupList; \n\n    })\n      \n      }catch(error){\n        console.log(\"Error @SearchForCommunities\", error)\n      }\n    }, \n}; \n\n\nconst FirebaseProvider = (props) => {\n    return <FirebaseContext.Provider value={Firebase}>{props.children}</FirebaseContext.Provider>; \n}; \n\nexport {FirebaseContext, FirebaseProvider};"],"mappings":"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"},"metadata":{},"sourceType":"module"}