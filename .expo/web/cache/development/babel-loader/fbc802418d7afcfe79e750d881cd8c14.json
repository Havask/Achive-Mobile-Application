{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject, _templateObject2;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useEffect } from \"react\";\nimport { UserContext } from \"../context/UserContext\";\nimport { FirebaseContext } from \"../context/FirebaseContext\";\nimport { useContext } from \"react\";\nimport styled from \"styled-components/native\";\nimport LottieView from \"lottie-react-native\";\nimport * as SecureStore from 'expo-secure-store';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default LoadingScreen = function LoadingScreen() {\n  var firebase = useContext(FirebaseContext);\n\n  var _useContext = useContext(UserContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      User = _useContext2[0],\n      setUser = _useContext2[1];\n\n  useEffect(function () {\n    setTimeout(function _callee() {\n      var value, parsedJson;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(SecureStore.getItemAsync(\"User\"));\n\n            case 3:\n              value = _context.sent;\n\n              if (!(value !== null)) {\n                _context.next = 17;\n                break;\n              }\n\n              parsedJson = JSON.parse(value);\n\n              if (!(parsedJson.email && parsedJson.password)) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(firebase.SignInUser(parsedJson.email, parsedJson.password));\n\n            case 9:\n              _context.next = 13;\n              break;\n\n            case 11:\n              setUser(function (state) {\n                return _objectSpread(_objectSpread({}, state), {}, {\n                  isLoggedIn: false\n                });\n              });\n              return _context.abrupt(\"return\");\n\n            case 13:\n              _context.next = 15;\n              return _regeneratorRuntime.awrap(setUser({\n                username: parsedJson.username,\n                email: parsedJson.email,\n                password: parsedJson.password,\n                uid: parsedJson.uid,\n                groups: parsedJson.groups,\n                profilePhotoUrl: parsedJson.profilePhotoUrl,\n                isLoggedIn: parsedJson.isLoggedIn\n              }));\n\n            case 15:\n              _context.next = 18;\n              break;\n\n            case 17:\n              setUser(function (state) {\n                return _objectSpread(_objectSpread({}, state), {}, {\n                  isLoggedIn: false\n                });\n              });\n\n            case 18:\n              _context.next = 23;\n              break;\n\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(\"Error @LoadingScreen\", _context.t0);\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 20]], Promise);\n    }, 500);\n  }, []);\n  return _jsx(Container, {\n    children: _jsx(LottieView, {\n      source: require(\"../assets/prog.json\"),\n      autoPlay: true,\n      loop: true,\n      style: {\n        width: \"100%\",\n        marginBottom: 50\n      }\n    })\n  });\n};\nvar Container = styled.View(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n    flex: 1; \\n    align-items: center; \\n    justify-content: center; \\n\\n\"])));\nvar AchiveLogo = styled.Image(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n    align-items: center; \\n    justify-content: center; \\n    width: 250px;\\n    height: 150px;\\n    margin: 0px 90px 0px; \\n\"])));","map":{"version":3,"names":["React","useEffect","UserContext","FirebaseContext","useContext","styled","LottieView","SecureStore","LoadingScreen","firebase","User","setUser","setTimeout","getItemAsync","value","parsedJson","JSON","parse","email","password","SignInUser","state","isLoggedIn","username","uid","groups","profilePhotoUrl","console","log","require","width","marginBottom","Container","View","AchiveLogo","Image"],"sources":["/Users/havardskjaerstein/Desktop/Achive/screens/LoadingScreen.js"],"sourcesContent":["import React, {useEffect} from \"react\";\nimport {UserContext} from \"../context/UserContext\"\nimport {FirebaseContext} from \"../context/FirebaseContext\"\nimport { useContext } from \"react\";\nimport styled from \"styled-components/native\"\nimport LottieView from \"lottie-react-native\";\nimport * as SecureStore from 'expo-secure-store';\n\nexport default LoadingScreen = () => {\n\n    const firebase = useContext(FirebaseContext); \n    const [User, setUser] = useContext(UserContext); \n\n    useEffect(() => {\n        setTimeout(async () => {\n\n            try{\n                const value = await SecureStore.getItemAsync(\"User\");\n\n                if (value !== null) {\n                    \n                    const parsedJson = JSON.parse(value)\n                  \n\n                    if (parsedJson.email && parsedJson.password){\n                        await firebase.SignInUser(parsedJson.email, parsedJson.password);\n                    }else{\n                        setUser((state) => ({ ...state, isLoggedIn: false})); \n                        return; \n                    }\n\n                    await setUser({\n                        username: parsedJson.username,\n                        email: parsedJson.email, \n                        password: parsedJson.password,\n                        uid: parsedJson.uid, \n                        groups: parsedJson.groups, \n                        profilePhotoUrl: parsedJson.profilePhotoUrl,\n                        isLoggedIn: parsedJson.isLoggedIn, \n                      })\n            \n                }else{\n                    setUser((state) => ({ ...state, isLoggedIn: false})); \n                }\n            }catch(error){\n                console.log(\"Error @LoadingScreen\", error)\n            }\n        }, 500)\n    }, [])\n\n    //<AchiveLogo source = {require(\"../logo/logo.png\")} />\n    return (\n        <Container>\n\n            <LottieView \n                source={require(\"../assets/prog.json\")}\n                autoPlay\n                loop\n                style={{width: \"100%\", marginBottom: 50}}\n                >\n            </LottieView>\n        </Container>\n    );\n}\n\nconst Container = styled.View`\n    flex: 1; \n    align-items: center; \n    justify-content: center; \n\n`\n\nconst AchiveLogo = styled.Image`\n    align-items: center; \n    justify-content: center; \n    width: 250px;\n    height: 150px;\n    margin: 0px 90px 0px; \n`;"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,WAAR;AACA,SAAQC,eAAR;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;;AAEA,eAAeC,aAAa,GAAG,yBAAM;EAEjC,IAAMC,QAAQ,GAAGL,UAAU,CAACD,eAAD,CAA3B;;EACA,kBAAwBC,UAAU,CAACF,WAAD,CAAlC;EAAA;EAAA,IAAOQ,IAAP;EAAA,IAAaC,OAAb;;EAEAV,SAAS,CAAC,YAAM;IACZW,UAAU,CAAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;cAAA,iCAGiBL,WAAW,CAACM,YAAZ,CAAyB,MAAzB,CAHjB;;YAAA;cAGGC,KAHH;;cAAA,MAKCA,KAAK,KAAK,IALX;gBAAA;gBAAA;cAAA;;cAOOC,UAPP,GAOoBC,IAAI,CAACC,KAAL,CAAWH,KAAX,CAPpB;;cAAA,MAUKC,UAAU,CAACG,KAAX,IAAoBH,UAAU,CAACI,QAVpC;gBAAA;gBAAA;cAAA;;cAAA;cAAA,iCAWWV,QAAQ,CAACW,UAAT,CAAoBL,UAAU,CAACG,KAA/B,EAAsCH,UAAU,CAACI,QAAjD,CAXX;;YAAA;cAAA;cAAA;;YAAA;cAaKR,OAAO,CAAC,UAACU,KAAD;gBAAA,uCAAiBA,KAAjB;kBAAwBC,UAAU,EAAE;gBAApC;cAAA,CAAD,CAAP;cAbL;;YAAA;cAAA;cAAA,iCAiBOX,OAAO,CAAC;gBACVY,QAAQ,EAAER,UAAU,CAACQ,QADX;gBAEVL,KAAK,EAAEH,UAAU,CAACG,KAFR;gBAGVC,QAAQ,EAAEJ,UAAU,CAACI,QAHX;gBAIVK,GAAG,EAAET,UAAU,CAACS,GAJN;gBAKVC,MAAM,EAAEV,UAAU,CAACU,MALT;gBAMVC,eAAe,EAAEX,UAAU,CAACW,eANlB;gBAOVJ,UAAU,EAAEP,UAAU,CAACO;cAPb,CAAD,CAjBd;;YAAA;cAAA;cAAA;;YAAA;cA4BCX,OAAO,CAAC,UAACU,KAAD;gBAAA,uCAAiBA,KAAjB;kBAAwBC,UAAU,EAAE;gBAApC;cAAA,CAAD,CAAP;;YA5BD;cAAA;cAAA;;YAAA;cAAA;cAAA;cA+BHK,OAAO,CAACC,GAAR,CAAY,sBAAZ;;YA/BG;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAD,EAiCP,GAjCO,CAAV;EAkCH,CAnCQ,EAmCN,EAnCM,CAAT;EAsCA,OACI,KAAC,SAAD;IAAA,UAEI,KAAC,UAAD;MACI,MAAM,EAAEC,OAAO,uBADnB;MAEI,QAAQ,MAFZ;MAGI,IAAI,MAHR;MAII,KAAK,EAAE;QAACC,KAAK,EAAE,MAAR;QAAgBC,YAAY,EAAE;MAA9B;IAJX;EAFJ,EADJ;AAYH,CAvDD;AAyDA,IAAMC,SAAS,GAAG3B,MAAM,CAAC4B,IAAV,uJAAf;AAOA,IAAMC,UAAU,GAAG7B,MAAM,CAAC8B,KAAV,2MAAhB"},"metadata":{},"sourceType":"module"}